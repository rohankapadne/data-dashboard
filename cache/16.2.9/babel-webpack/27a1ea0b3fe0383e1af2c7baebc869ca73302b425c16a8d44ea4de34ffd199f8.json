{"ast":null,"code":"/* *\n *\n *  (c) 2010-2021 Torstein Honsi\n *\n *  License: www.highcharts.com/license\n *\n *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n *\n * */\n'use strict';\n\nimport AST from '../HTML/AST.js';\nimport Color from '../../Color/Color.js';\nimport H from '../../Globals.js';\nconst {\n  charts,\n  deg2rad,\n  doc,\n  isFirefox,\n  isMS,\n  isWebKit,\n  noop,\n  SVG_NS,\n  symbolSizes,\n  win\n} = H;\nimport RendererRegistry from '../RendererRegistry.js';\nimport SVGElement from './SVGElement.js';\nimport SVGLabel from './SVGLabel.js';\nimport Symbols from './Symbols.js';\nimport TextBuilder from './TextBuilder.js';\nimport U from '../../Utilities.js';\nconst {\n  addEvent,\n  attr,\n  createElement,\n  css,\n  defined,\n  destroyObjectProperties,\n  extend,\n  isArray,\n  isNumber,\n  isObject,\n  isString,\n  merge,\n  pick,\n  pInt,\n  uniqueKey\n} = U;\n/* *\n *\n *  Variables\n *\n * */\nlet hasInternalReferenceBug;\n/* *\n *\n *  Class\n *\n * */\n/* eslint-disable no-invalid-this, valid-jsdoc */\n/**\n * Allows direct access to the Highcharts rendering layer in order to draw\n * primitive shapes like circles, rectangles, paths or text directly on a chart,\n * or independent from any chart. The SVGRenderer represents a wrapper object\n * for SVG in modern browsers.\n *\n * An existing chart's renderer can be accessed through {@link Chart.renderer}.\n * The renderer can also be used completely decoupled from a chart.\n *\n * @sample highcharts/members/renderer-on-chart\n *         Annotating a chart programmatically.\n * @sample highcharts/members/renderer-basic\n *         Independent SVG drawing.\n *\n * @example\n * // Use directly without a chart object.\n * let renderer = new Highcharts.Renderer(parentNode, 600, 400);\n *\n * @class\n * @name Highcharts.SVGRenderer\n *\n * @param {Highcharts.HTMLDOMElement} container\n *        Where to put the SVG in the web page.\n *\n * @param {number} width\n *        The width of the SVG.\n *\n * @param {number} height\n *        The height of the SVG.\n *\n * @param {Highcharts.CSSObject} [style]\n *        The box style, if not in styleMode\n *\n * @param {boolean} [forExport=false]\n *        Whether the rendered content is intended for export.\n *\n * @param {boolean} [allowHTML=true]\n *        Whether the renderer is allowed to include HTML text, which will be\n *        projected on top of the SVG.\n *\n * @param {boolean} [styledMode=false]\n *        Whether the renderer belongs to a chart that is in styled mode.\n *        If it does, it will avoid setting presentational attributes in\n *        some cases, but not when set explicitly through `.attr` and `.css`\n *        etc.\n */\nclass SVGRenderer {\n  /* *\n   *\n   *  Constructors\n   *\n   * */\n  constructor(container, width, height, style, forExport, allowHTML, styledMode) {\n    /* *\n     *\n     *  Properties\n     *\n     * */\n    this.alignedObjects = void 0;\n    /**\n     * The root `svg` node of the renderer.\n     *\n     * @name Highcharts.SVGRenderer#box\n     * @type {Highcharts.SVGDOMElement}\n     */\n    this.box = void 0;\n    /**\n     * The wrapper for the root `svg` node of the renderer.\n     *\n     * @name Highcharts.SVGRenderer#boxWrapper\n     * @type {Highcharts.SVGElement}\n     */\n    this.boxWrapper = void 0;\n    this.cache = void 0;\n    this.cacheKeys = void 0;\n    this.chartIndex = void 0;\n    /**\n     * A pointer to the `defs` node of the root SVG.\n     *\n     * @name Highcharts.SVGRenderer#defs\n     * @type {Highcharts.SVGElement}\n     */\n    this.defs = void 0;\n    this.globalAnimation = void 0;\n    this.gradients = void 0;\n    this.height = void 0;\n    this.imgCount = void 0;\n    this.style = void 0;\n    /**\n     * Page url used for internal references.\n     *\n     * @private\n     * @name Highcharts.SVGRenderer#url\n     * @type {string}\n     */\n    this.url = void 0;\n    this.width = void 0;\n    this.init(container, width, height, style, forExport, allowHTML, styledMode);\n  }\n  /* *\n   *\n   *  Functions\n   *\n   * */\n  /**\n   * Initialize the SVGRenderer. Overridable initializer function that takes\n   * the same parameters as the constructor.\n   *\n   * @function Highcharts.SVGRenderer#init\n   *\n   * @param {Highcharts.HTMLDOMElement} container\n   * Where to put the SVG in the web page.\n   *\n   * @param {number} width\n   * The width of the SVG.\n   *\n   * @param {number} height\n   * The height of the SVG.\n   *\n   * @param {Highcharts.CSSObject} [style]\n   * The box style, if not in styleMode\n   *\n   * @param {boolean} [forExport=false]\n   * Whether the rendered content is intended for export.\n   *\n   * @param {boolean} [allowHTML=true]\n   * Whether the renderer is allowed to include HTML text, which will be\n   * projected on top of the SVG.\n   *\n   * @param {boolean} [styledMode=false]\n   * Whether the renderer belongs to a chart that is in styled mode. If it\n   * does, it will avoid setting presentational attributes in some cases, but\n   * not when set explicitly through `.attr` and `.css` etc.\n   */\n  init(container, width, height, style, forExport, allowHTML, styledMode) {\n    const renderer = this,\n      boxWrapper = renderer.createElement('svg').attr({\n        version: '1.1',\n        'class': 'highcharts-root'\n      }),\n      element = boxWrapper.element;\n    if (!styledMode) {\n      boxWrapper.css(this.getStyle(style));\n    }\n    container.appendChild(element);\n    // Always use ltr on the container, otherwise text-anchor will be\n    // flipped and text appear outside labels, buttons, tooltip etc (#3482)\n    attr(container, 'dir', 'ltr');\n    // For browsers other than IE, add the namespace attribute (#1978)\n    if (container.innerHTML.indexOf('xmlns') === -1) {\n      attr(element, 'xmlns', this.SVG_NS);\n    }\n    this.box = element;\n    this.boxWrapper = boxWrapper;\n    renderer.alignedObjects = [];\n    this.url = this.getReferenceURL();\n    // Add description\n    const desc = this.createElement('desc').add();\n    desc.element.appendChild(doc.createTextNode('Created with Highcharts 11.2.0'));\n    renderer.defs = this.createElement('defs').add();\n    renderer.allowHTML = allowHTML;\n    renderer.forExport = forExport;\n    renderer.styledMode = styledMode;\n    renderer.gradients = {}; // Object where gradient SvgElements are stored\n    renderer.cache = {}; // Cache for numerical bounding boxes\n    renderer.cacheKeys = [];\n    renderer.imgCount = 0;\n    renderer.rootFontSize = boxWrapper.getStyle('font-size');\n    renderer.setSize(width, height, false);\n    // Issue 110 workaround:\n    // In Firefox, if a div is positioned by percentage, its pixel position\n    // may land between pixels. The container itself doesn't display this,\n    // but an SVG element inside this container will be drawn at subpixel\n    // precision. In order to draw sharp lines, this must be compensated\n    // for. This doesn't seem to work inside iframes though (like in\n    // jsFiddle).\n    let subPixelFix, rect;\n    if (isFirefox && container.getBoundingClientRect) {\n      subPixelFix = function () {\n        css(container, {\n          left: 0,\n          top: 0\n        });\n        rect = container.getBoundingClientRect();\n        css(container, {\n          left: Math.ceil(rect.left) - rect.left + 'px',\n          top: Math.ceil(rect.top) - rect.top + 'px'\n        });\n      };\n      // run the fix now\n      subPixelFix();\n      // run it on resize\n      renderer.unSubPixelFix = addEvent(win, 'resize', subPixelFix);\n    }\n  }\n  /**\n   * General method for adding a definition to the SVG `defs` tag. Can be used\n   * for gradients, fills, filters etc. Styled mode only. A hook for adding\n   * general definitions to the SVG's defs tag. Definitions can be referenced\n   * from the CSS by its `id`. Read more in\n   * [gradients, shadows and patterns](https://www.highcharts.com/docs/chart-design-and-style/gradients-shadows-and-patterns).\n   * Styled mode only.\n   *\n   * @function Highcharts.SVGRenderer#definition\n   *\n   * @param {Highcharts.ASTNode} def\n   * A serialized form of an SVG definition, including children.\n   *\n   * @return {Highcharts.SVGElement}\n   * The inserted node.\n   */\n  definition(def) {\n    const ast = new AST([def]);\n    return ast.addToDOM(this.defs.element);\n  }\n  /**\n   * Get the prefix needed for internal URL references to work in certain\n   * cases. Some older browser versions had a bug where internal url\n   * references in SVG attributes, on the form `url(#some-id)`, would fail if\n   * a base tag was present in the page. There were also issues with\n   * `history.pushState` related to this prefix.\n   *\n   * Related issues: #24, #672, #1070, #5244.\n   *\n   * The affected browsers are:\n   * - Chrome <= 53 (May 2018)\n   * - Firefox <= 51 (January 2017)\n   * - Safari/Mac <= 12.1 (2018 or 2019)\n   * - Safari/iOS <= 13\n   *\n   * @todo Remove this hack when time has passed. All the affected browsers\n   * are evergreens, so it is increasingly unlikely that users are affected by\n   * the bug.\n   *\n   * @return {string}\n   * The prefix to use. An empty string for modern browsers.\n   */\n  getReferenceURL() {\n    if ((isFirefox || isWebKit) && doc.getElementsByTagName('base').length) {\n      // Detect if a clip path is taking effect by performing a hit test\n      // outside the clipped area. If the hit element is the rectangle\n      // that was supposed to be clipped, the bug is present. This only\n      // has to be performed once per page load, so we store the result\n      // locally in the module.\n      if (!defined(hasInternalReferenceBug)) {\n        const id = uniqueKey();\n        const ast = new AST([{\n          tagName: 'svg',\n          attributes: {\n            width: 8,\n            height: 8\n          },\n          children: [{\n            tagName: 'defs',\n            children: [{\n              tagName: 'clipPath',\n              attributes: {\n                id\n              },\n              children: [{\n                tagName: 'rect',\n                attributes: {\n                  width: 4,\n                  height: 4\n                }\n              }]\n            }]\n          }, {\n            tagName: 'rect',\n            attributes: {\n              id: 'hitme',\n              width: 8,\n              height: 8,\n              'clip-path': `url(#${id})`,\n              fill: 'rgba(0,0,0,0.001)'\n            }\n          }]\n        }]);\n        const svg = ast.addToDOM(doc.body);\n        css(svg, {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          zIndex: 9e5\n        });\n        const hitElement = doc.elementFromPoint(6, 6);\n        hasInternalReferenceBug = (hitElement && hitElement.id) === 'hitme';\n        doc.body.removeChild(svg);\n      }\n      if (hasInternalReferenceBug) {\n        return win.location.href.split('#')[0] // remove the hash\n        .replace(/<[^>]*>/g, '') // wing cut HTML\n        // escape parantheses and quotes\n        .replace(/([\\('\\)])/g, '\\\\$1')\n        // replace spaces (needed for Safari only)\n        .replace(/ /g, '%20');\n      }\n    }\n    return '';\n  }\n  /**\n   * Get the global style setting for the renderer.\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#getStyle\n   *\n   * @param {Highcharts.CSSObject} style\n   * Style settings.\n   *\n   * @return {Highcharts.CSSObject}\n   * The style settings mixed with defaults.\n   */\n  getStyle(style) {\n    this.style = extend({\n      fontFamily: 'Helvetica, Arial, sans-serif',\n      fontSize: '1rem'\n    }, style);\n    return this.style;\n  }\n  /**\n   * Apply the global style on the renderer, mixed with the default styles.\n   *\n   * @function Highcharts.SVGRenderer#setStyle\n   *\n   * @param {Highcharts.CSSObject} style\n   * CSS to apply.\n   */\n  setStyle(style) {\n    this.boxWrapper.css(this.getStyle(style));\n  }\n  /**\n   * Detect whether the renderer is hidden. This happens when one of the\n   * parent elements has `display: none`. Used internally to detect when we\n   * needto render preliminarily in another div to get the text bounding boxes\n   * right.\n   *\n   * @function Highcharts.SVGRenderer#isHidden\n   *\n   * @return {boolean}\n   * True if it is hidden.\n   */\n  isHidden() {\n    return !this.boxWrapper.getBBox().width;\n  }\n  /**\n   * Destroys the renderer and its allocated members.\n   *\n   * @function Highcharts.SVGRenderer#destroy\n   *\n   * @return {null}\n   * Pass through value.\n   */\n  destroy() {\n    const renderer = this,\n      rendererDefs = renderer.defs;\n    renderer.box = null;\n    renderer.boxWrapper = renderer.boxWrapper.destroy();\n    // Call destroy on all gradient elements\n    destroyObjectProperties(renderer.gradients || {});\n    renderer.gradients = null;\n    renderer.defs = rendererDefs.destroy();\n    // Remove sub pixel fix handler (#982)\n    if (renderer.unSubPixelFix) {\n      renderer.unSubPixelFix();\n    }\n    renderer.alignedObjects = null;\n    return null;\n  }\n  /**\n   * Create a wrapper for an SVG element. Serves as a factory for\n   * {@link SVGElement}, but this function is itself mostly called from\n   * primitive factories like {@link SVGRenderer#path}, {@link\n   * SVGRenderer#rect} or {@link SVGRenderer#text}.\n   *\n   * @function Highcharts.SVGRenderer#createElement\n   *\n   * @param {string} nodeName\n   * The node name, for example `rect`, `g` etc.\n   *\n   * @return {Highcharts.SVGElement}\n   * The generated SVGElement.\n   */\n  createElement(nodeName) {\n    const wrapper = new this.Element();\n    wrapper.init(this, nodeName);\n    return wrapper;\n  }\n  /**\n   * Get converted radial gradient attributes according to the radial\n   * reference. Used internally from the {@link SVGElement#colorGradient}\n   * function.\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#getRadialAttr\n   */\n  getRadialAttr(radialReference, gradAttr) {\n    return {\n      cx: radialReference[0] - radialReference[2] / 2 + (gradAttr.cx || 0) * radialReference[2],\n      cy: radialReference[1] - radialReference[2] / 2 + (gradAttr.cy || 0) * radialReference[2],\n      r: (gradAttr.r || 0) * radialReference[2]\n    };\n  }\n  /**\n   * Create a drop shadow definition and return its id\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#shadowDefinition\n   *\n   * @param {boolean|Highcharts.ShadowOptionsObject} [shadowOptions] The\n   *        shadow options. If `true`, the default options are applied\n   */\n  shadowDefinition(shadowOptions) {\n    const id = [`highcharts-drop-shadow-${this.chartIndex}`, ...Object.keys(shadowOptions).map(key => `${key}-${shadowOptions[key]}`)].join('-').toLowerCase().replace(/[^a-z0-9\\-]/g, ''),\n      options = merge({\n        color: '#000000',\n        offsetX: 1,\n        offsetY: 1,\n        opacity: 0.15,\n        width: 5\n      }, shadowOptions);\n    if (!this.defs.element.querySelector(`#${id}`)) {\n      this.definition({\n        tagName: 'filter',\n        attributes: {\n          id,\n          filterUnits: options.filterUnits\n        },\n        children: [{\n          tagName: 'feDropShadow',\n          attributes: {\n            dx: options.offsetX,\n            dy: options.offsetY,\n            'flood-color': options.color,\n            // Tuned and modified to keep a preserve compatibility\n            // with the old settings\n            'flood-opacity': Math.min(options.opacity * 5, 1),\n            stdDeviation: options.width / 2\n          }\n        }]\n      });\n    }\n    return id;\n  }\n  /**\n   * Parse a simple HTML string into SVG tspans. Called internally when text\n   * is set on an SVGElement. The function supports a subset of HTML tags, CSS\n   * text features like `width`, `text-overflow`, `white-space`, and also\n   * attributes like `href` and `style`.\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#buildText\n   *\n   * @param {Highcharts.SVGElement} wrapper\n   * The parent SVGElement.\n   */\n  buildText(wrapper) {\n    new TextBuilder(wrapper).buildSVG();\n  }\n  /**\n   * Returns white for dark colors and black for bright colors, based on W3C's\n   * definition of [Relative luminance](\n   * https://www.w3.org/WAI/GL/wiki/Relative_luminance).\n   *\n   * @function Highcharts.SVGRenderer#getContrast\n   *\n   * @param {Highcharts.ColorString} color\n   * The color to get the contrast for.\n   *\n   * @return {Highcharts.ColorString}\n   * The contrast color, either `#000000` or `#FFFFFF`.\n   */\n  getContrast(color) {\n    // #6216, #17273\n    const rgba = Color.parse(color).rgba.map(b8 => {\n      const c = b8 / 255;\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n    });\n    // Relative luminance\n    const l = 0.2126 * rgba[0] + 0.7152 * rgba[1] + 0.0722 * rgba[2];\n    // Use white or black based on which provides more contrast\n    return 1.05 / (l + 0.05) > (l + 0.05) / 0.05 ? '#FFFFFF' : '#000000';\n  }\n  /**\n   * Create a button with preset states.\n   *\n   * @function Highcharts.SVGRenderer#button\n   *\n   * @param {string} text\n   * The text or HTML to draw.\n   *\n   * @param {number} x\n   * The x position of the button's left side.\n   *\n   * @param {number} y\n   * The y position of the button's top side.\n   *\n   * @param {Highcharts.EventCallbackFunction<Highcharts.SVGElement>} callback\n   * The function to execute on button click or touch.\n   *\n   * @param {Highcharts.SVGAttributes} [theme]\n   * SVG attributes for the normal state.\n   *\n   * @param {Highcharts.SVGAttributes} [hoverState]\n   * SVG attributes for the hover state.\n   *\n   * @param {Highcharts.SVGAttributes} [selectState]\n   * SVG attributes for the pressed state.\n   *\n   * @param {Highcharts.SVGAttributes} [disabledState]\n   * SVG attributes for the disabled state.\n   *\n   * @param {Highcharts.SymbolKeyValue} [shape=rect]\n   * The shape type.\n   *\n   * @param {boolean} [useHTML=false]\n   * Whether to use HTML to render the label.\n   *\n   * @return {Highcharts.SVGElement}\n   * The button element.\n   */\n  button(text, x, y, callback, theme = {}, hoverState, selectState, disabledState, shape, useHTML) {\n    const label = this.label(text, x, y, shape, void 0, void 0, useHTML, void 0, 'button'),\n      styledMode = this.styledMode,\n      states = theme.states || {};\n    let curState = 0;\n    theme = merge(theme);\n    delete theme.states;\n    const normalStyle = merge({\n      color: \"#333333\" /* Palette.neutralColor80 */,\n      cursor: 'pointer',\n      fontSize: '0.8em',\n      fontWeight: 'normal'\n    }, theme.style);\n    delete theme.style;\n    // Remove stylable attributes. Pass in the ButtonThemeObject and get the\n    // SVGAttributes subset back.\n    let normalState = AST.filterUserAttributes(theme);\n    // Default, non-stylable attributes\n    label.attr(merge({\n      padding: 8,\n      r: 2\n    }, normalState));\n    // Presentational. The string type is a mistake, it is just for\n    // compliance with SVGAttribute and is not used in button theme.\n    let hoverStyle, selectStyle, disabledStyle;\n    if (!styledMode) {\n      // Normal state - prepare the attributes\n      normalState = merge({\n        fill: \"#f7f7f7\" /* Palette.neutralColor3 */,\n        stroke: \"#cccccc\" /* Palette.neutralColor20 */,\n        'stroke-width': 1\n      }, normalState);\n      // Hover state\n      hoverState = merge(normalState, {\n        fill: \"#e6e6e6\" /* Palette.neutralColor10 */\n      }, AST.filterUserAttributes(hoverState || states.hover || {}));\n      hoverStyle = hoverState.style;\n      delete hoverState.style;\n      // Pressed state\n      selectState = merge(normalState, {\n        fill: \"#e6e9ff\" /* Palette.highlightColor10 */,\n        style: {\n          color: \"#000000\" /* Palette.neutralColor100 */,\n          fontWeight: 'bold'\n        }\n      }, AST.filterUserAttributes(selectState || states.select || {}));\n      selectStyle = selectState.style;\n      delete selectState.style;\n      // Disabled state\n      disabledState = merge(normalState, {\n        style: {\n          color: \"#cccccc\" /* Palette.neutralColor20 */\n        }\n      }, AST.filterUserAttributes(disabledState || states.disabled || {}));\n      disabledStyle = disabledState.style;\n      delete disabledState.style;\n    }\n    // Add the events. IE9 and IE10 need mouseover and mouseout to function\n    // (#667).\n    addEvent(label.element, isMS ? 'mouseover' : 'mouseenter', function () {\n      if (curState !== 3) {\n        label.setState(1);\n      }\n    });\n    addEvent(label.element, isMS ? 'mouseout' : 'mouseleave', function () {\n      if (curState !== 3) {\n        label.setState(curState);\n      }\n    });\n    label.setState = function (state) {\n      // Hover state is temporary, don't record it\n      if (state !== 1) {\n        label.state = curState = state;\n      }\n      // Update visuals\n      label.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass('highcharts-button-' + ['normal', 'hover', 'pressed', 'disabled'][state || 0]);\n      if (!styledMode) {\n        label.attr([normalState, hoverState, selectState, disabledState][state || 0]);\n        const css = [normalStyle, hoverStyle, selectStyle, disabledStyle][state || 0];\n        if (isObject(css)) {\n          label.css(css);\n        }\n      }\n    };\n    // Presentational attributes\n    if (!styledMode) {\n      label.attr(normalState).css(extend({\n        cursor: 'default'\n      }, normalStyle));\n      // HTML labels don't need to handle pointer events because click and\n      // mouseenter/mouseleave is bound to the underlying <g> element.\n      // Should this be reconsidered, we need more complex logic to share\n      // events between the <g> and its <div> counterpart, and avoid\n      // triggering mouseenter/mouseleave when hovering from one to the\n      // other (#17440).\n      if (useHTML) {\n        label.text.css({\n          pointerEvents: 'none'\n        });\n      }\n    }\n    return label.on('touchstart', e => e.stopPropagation()).on('click', function (e) {\n      if (curState !== 3) {\n        callback.call(label, e);\n      }\n    });\n  }\n  /**\n   * Make a straight line crisper by not spilling out to neighbour pixels.\n   *\n   * @function Highcharts.SVGRenderer#crispLine\n   *\n   * @param {Highcharts.SVGPathArray} points\n   *        The original points on the format `[['M', 0, 0], ['L', 100, 0]]`.\n   *\n   * @param {number} width\n   *        The width of the line.\n   *\n   * @param {string} [roundingFunction=round]\n   *        The rounding function name on the `Math` object, can be one of\n   *        `round`, `floor` or `ceil`.\n   *\n   * @return {Highcharts.SVGPathArray}\n   *         The original points array, but modified to render crisply.\n   */\n  crispLine(points, width, roundingFunction = 'round') {\n    const start = points[0];\n    const end = points[1];\n    // Normalize to a crisp line\n    if (defined(start[1]) && start[1] === end[1]) {\n      // Substract due to #1129. Now bottom and left axis gridlines behave\n      // the same.\n      start[1] = end[1] = Math[roundingFunction](start[1]) - width % 2 / 2;\n    }\n    if (defined(start[2]) && start[2] === end[2]) {\n      start[2] = end[2] = Math[roundingFunction](start[2]) + width % 2 / 2;\n    }\n    return points;\n  }\n  /**\n   * Draw a path, wraps the SVG `path` element.\n   *\n   * @sample highcharts/members/renderer-path-on-chart/\n   *         Draw a path in a chart\n   * @sample highcharts/members/renderer-path/\n   *         Draw a path independent from a chart\n   *\n   * @example\n   * let path = renderer.path(['M', 10, 10, 'L', 30, 30, 'z'])\n   *     .attr({ stroke: '#ff00ff' })\n   *     .add();\n   *\n   * @function Highcharts.SVGRenderer#path\n   *\n   * @param {Highcharts.SVGPathArray} [path]\n   * An SVG path definition in array form.\n   *\n   * @return {Highcharts.SVGElement}\n   * The generated wrapper element.\n   *\n   */ /**\n      * Draw a path, wraps the SVG `path` element.\n      *\n      * @function Highcharts.SVGRenderer#path\n      *\n      * @param {Highcharts.SVGAttributes} [attribs]\n      * The initial attributes.\n      *\n      * @return {Highcharts.SVGElement}\n      * The generated wrapper element.\n      */\n  path(path) {\n    const attribs = this.styledMode ? {} : {\n      fill: 'none'\n    };\n    if (isArray(path)) {\n      attribs.d = path;\n    } else if (isObject(path)) {\n      // attributes\n      extend(attribs, path);\n    }\n    return this.createElement('path').attr(attribs);\n  }\n  /**\n   * Draw a circle, wraps the SVG `circle` element.\n   *\n   * @sample highcharts/members/renderer-circle/\n   *         Drawing a circle\n   *\n   * @function Highcharts.SVGRenderer#circle\n   *\n   * @param {number} [x]\n   * The center x position.\n   *\n   * @param {number} [y]\n   * The center y position.\n   *\n   * @param {number} [r]\n   * The radius.\n   *\n   * @return {Highcharts.SVGElement}\n   * The generated wrapper element.\n   */ /**\n      * Draw a circle, wraps the SVG `circle` element.\n      *\n      * @function Highcharts.SVGRenderer#circle\n      *\n      * @param {Highcharts.SVGAttributes} [attribs]\n      * The initial attributes.\n      *\n      * @return {Highcharts.SVGElement}\n      * The generated wrapper element.\n      */\n  circle(x, y, r) {\n    const attribs = isObject(x) ? x : typeof x === 'undefined' ? {} : {\n        x: x,\n        y: y,\n        r: r\n      },\n      wrapper = this.createElement('circle');\n    // Setting x or y translates to cx and cy\n    wrapper.xSetter = wrapper.ySetter = function (value, key, element) {\n      element.setAttribute('c' + key, value);\n    };\n    return wrapper.attr(attribs);\n  }\n  /**\n   * Draw and return an arc.\n   *\n   * @sample highcharts/members/renderer-arc/\n   *         Drawing an arc\n   *\n   * @function Highcharts.SVGRenderer#arc\n   *\n   * @param {number} [x=0]\n   * Center X position.\n   *\n   * @param {number} [y=0]\n   * Center Y position.\n   *\n   * @param {number} [r=0]\n   * The outer radius' of the arc.\n   *\n   * @param {number} [innerR=0]\n   * Inner radius like used in donut charts.\n   *\n   * @param {number} [start=0]\n   * The starting angle of the arc in radians, where 0 is to the right and\n   * `-Math.PI/2` is up.\n   *\n   * @param {number} [end=0]\n   * The ending angle of the arc in radians, where 0 is to the right and\n   * `-Math.PI/2` is up.\n   *\n   * @return {Highcharts.SVGElement}\n   * The generated wrapper element.\n   */ /**\n      * Draw and return an arc. Overloaded function that takes arguments object.\n      *\n      * @function Highcharts.SVGRenderer#arc\n      *\n      * @param {Highcharts.SVGAttributes} attribs\n      * Initial SVG attributes.\n      *\n      * @return {Highcharts.SVGElement}\n      * The generated wrapper element.\n      */\n  arc(x, y, r, innerR, start, end) {\n    let options;\n    if (isObject(x)) {\n      options = x;\n      y = options.y;\n      r = options.r;\n      innerR = options.innerR;\n      start = options.start;\n      end = options.end;\n      x = options.x;\n    } else {\n      options = {\n        innerR,\n        start,\n        end\n      };\n    }\n    // Arcs are defined as symbols for the ability to set\n    // attributes in attr and animate\n    const arc = this.symbol('arc', x, y, r, r, options);\n    arc.r = r; // #959\n    return arc;\n  }\n  /**\n   * Draw and return a rectangle.\n   *\n   * @function Highcharts.SVGRenderer#rect\n   *\n   * @param {number} [x]\n   * Left position.\n   *\n   * @param {number} [y]\n   * Top position.\n   *\n   * @param {number} [width]\n   * Width of the rectangle.\n   *\n   * @param {number} [height]\n   * Height of the rectangle.\n   *\n   * @param {number} [r]\n   * Border corner radius.\n   *\n   * @param {number} [strokeWidth]\n   * A stroke width can be supplied to allow crisp drawing.\n   *\n   * @return {Highcharts.SVGElement}\n   * The generated wrapper element.\n   */ /**\n      * Draw and return a rectangle.\n      *\n      * @sample highcharts/members/renderer-rect-on-chart/\n      *         Draw a rectangle in a chart\n      * @sample highcharts/members/renderer-rect/\n      *         Draw a rectangle independent from a chart\n      *\n      * @function Highcharts.SVGRenderer#rect\n      *\n      * @param {Highcharts.SVGAttributes} [attributes]\n      * General SVG attributes for the rectangle.\n      *\n      * @return {Highcharts.SVGElement}\n      * The generated wrapper element.\n      */\n  rect(x, y, width, height, r, strokeWidth) {\n    const attribs = isObject(x) ? x : typeof x === 'undefined' ? {} : {\n        x,\n        y,\n        r,\n        width: Math.max(width || 0, 0),\n        height: Math.max(height || 0, 0)\n      },\n      wrapper = this.createElement('rect');\n    if (!this.styledMode) {\n      if (typeof strokeWidth !== 'undefined') {\n        attribs['stroke-width'] = strokeWidth;\n        extend(attribs, wrapper.crisp(attribs));\n      }\n      attribs.fill = 'none';\n    }\n    wrapper.rSetter = function (value, _key, element) {\n      wrapper.r = value;\n      attr(element, {\n        rx: value,\n        ry: value\n      });\n    };\n    wrapper.rGetter = function () {\n      return wrapper.r || 0;\n    };\n    return wrapper.attr(attribs);\n  }\n  /**\n   * Draw and return a rectangle with advanced corner rounding options.\n   *\n   * @function Highcharts.SVGRenderer#roundedRect\n   *\n   * @param {Highcharts.SVGAttributes} attribs\n   *      Attributes\n   * @return {Highcharts.SVGElement}\n   * The generated wrapper element.\n   */\n  roundedRect(attribs) {\n    return this.symbol('roundedRect').attr(attribs);\n  }\n  /**\n   * Resize the {@link SVGRenderer#box} and re-align all aligned child\n   * elements.\n   *\n   * @sample highcharts/members/renderer-g/\n   *         Show and hide grouped objects\n   *\n   * @function Highcharts.SVGRenderer#setSize\n   *\n   * @param {number} width\n   * The new pixel width.\n   *\n   * @param {number} height\n   * The new pixel height.\n   *\n   * @param {boolean|Partial<Highcharts.AnimationOptionsObject>} [animate=true]\n   * Whether and how to animate.\n   */\n  setSize(width, height, animate) {\n    const renderer = this;\n    renderer.width = width;\n    renderer.height = height;\n    renderer.boxWrapper.animate({\n      width: width,\n      height: height\n    }, {\n      step: function () {\n        this.attr({\n          viewBox: '0 0 ' + this.attr('width') + ' ' + this.attr('height')\n        });\n      },\n      duration: pick(animate, true) ? void 0 : 0\n    });\n    renderer.alignElements();\n  }\n  /**\n   * Create and return an svg group element. Child\n   * {@link Highcharts.SVGElement} objects are added to the group by using the\n   * group as the first parameter in {@link Highcharts.SVGElement#add|add()}.\n   *\n   * @function Highcharts.SVGRenderer#g\n   *\n   * @param {string} [name]\n   *        The group will be given a class name of `highcharts-{name}`. This\n   *        can be used for styling and scripting.\n   *\n   * @return {Highcharts.SVGElement}\n   *         The generated wrapper element.\n   */\n  g(name) {\n    const elem = this.createElement('g');\n    return name ? elem.attr({\n      'class': 'highcharts-' + name\n    }) : elem;\n  }\n  /**\n   * Display an image.\n   *\n   * @sample highcharts/members/renderer-image-on-chart/\n   *         Add an image in a chart\n   * @sample highcharts/members/renderer-image/\n   *         Add an image independent of a chart\n   *\n   * @function Highcharts.SVGRenderer#image\n   *\n   * @param {string} href\n   *        The image source.\n   *\n   * @param {number} [x]\n   *        The X position.\n   *\n   * @param {number} [y]\n   *        The Y position.\n   *\n   * @param {number} [width]\n   *        The image width. If omitted, it defaults to the image file width.\n   *\n   * @param {number} [height]\n   *        The image height. If omitted it defaults to the image file\n   *        height.\n   *\n   * @param {Function} [onload]\n   *        Event handler for image load.\n   *\n   * @return {Highcharts.SVGElement}\n   *         The generated wrapper element.\n   */\n  image(href, x, y, width, height, onload) {\n    const attribs = {\n      preserveAspectRatio: 'none'\n    };\n    // Optional properties (#11756)\n    if (isNumber(x)) {\n      attribs.x = x;\n    }\n    if (isNumber(y)) {\n      attribs.y = y;\n    }\n    if (isNumber(width)) {\n      attribs.width = width;\n    }\n    if (isNumber(height)) {\n      attribs.height = height;\n    }\n    const elemWrapper = this.createElement('image').attr(attribs),\n      onDummyLoad = function (e) {\n        elemWrapper.attr({\n          href\n        });\n        onload.call(elemWrapper, e);\n      };\n    // Add load event if supplied\n    if (onload) {\n      // We have to use a dummy HTML image since IE support for SVG image\n      // load events is very buggy. First set a transparent src, wait for\n      // dummy to load, and then add the real src to the SVG image.\n      elemWrapper.attr({\n        /* eslint-disable-next-line max-len */\n        href: 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n      });\n      const dummy = new win.Image();\n      addEvent(dummy, 'load', onDummyLoad);\n      dummy.src = href;\n      if (dummy.complete) {\n        onDummyLoad({});\n      }\n    } else {\n      elemWrapper.attr({\n        href\n      });\n    }\n    return elemWrapper;\n  }\n  /**\n   * Draw a symbol out of pre-defined shape paths from\n   * {@link SVGRenderer#symbols}.\n   * It is used in Highcharts for point makers, which cake a `symbol` option,\n   * and label and button backgrounds like in the tooltip and stock flags.\n   *\n   * @function Highcharts.SVGRenderer#symbol\n   *\n   * @param {string} symbol\n   * The symbol name.\n   *\n   * @param {number} [x]\n   * The X coordinate for the top left position.\n   *\n   * @param {number} [y]\n   * The Y coordinate for the top left position.\n   *\n   * @param {number} [width]\n   * The pixel width.\n   *\n   * @param {number} [height]\n   * The pixel height.\n   *\n   * @param {Highcharts.SymbolOptionsObject} [options]\n   * Additional options, depending on the actual symbol drawn.\n   *\n   * @return {Highcharts.SVGElement}\n   * SVG symbol.\n   */\n  symbol(symbol, x, y, width, height, options) {\n    const ren = this,\n      imageRegex = /^url\\((.*?)\\)$/,\n      isImage = imageRegex.test(symbol),\n      sym = !isImage && (this.symbols[symbol] ? symbol : 'circle'),\n      // get the symbol definition function\n      symbolFn = sym && this.symbols[sym];\n    let obj, path, imageSrc, centerImage;\n    if (symbolFn) {\n      // Check if there's a path defined for this symbol\n      if (typeof x === 'number') {\n        path = symbolFn.call(this.symbols, Math.round(x || 0), Math.round(y || 0), width || 0, height || 0, options);\n      }\n      obj = this.path(path);\n      if (!ren.styledMode) {\n        obj.attr('fill', 'none');\n      }\n      // expando properties for use in animate and attr\n      extend(obj, {\n        symbolName: sym || void 0,\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      });\n      if (options) {\n        extend(obj, options);\n      }\n      // Image symbols\n    } else if (isImage) {\n      imageSrc = symbol.match(imageRegex)[1];\n      // Create the image synchronously, add attribs async\n      const img = obj = this.image(imageSrc);\n      // The image width is not always the same as the symbol width. The\n      // image may be centered within the symbol, as is the case when\n      // image shapes are used as label backgrounds, for example in flags.\n      img.imgwidth = pick(options && options.width, symbolSizes[imageSrc] && symbolSizes[imageSrc].width);\n      img.imgheight = pick(options && options.height, symbolSizes[imageSrc] && symbolSizes[imageSrc].height);\n      /**\n       * Set the size and position\n       */\n      centerImage = obj => obj.attr({\n        width: obj.width,\n        height: obj.height\n      });\n      /**\n       * Width and height setters that take both the image's physical size\n       * and the label size into consideration, and translates the image\n       * to center within the label.\n       */\n      ['width', 'height'].forEach(key => {\n        img[`${key}Setter`] = function (value, key) {\n          this[key] = value;\n          const {\n              alignByTranslate,\n              element,\n              width,\n              height,\n              imgwidth,\n              imgheight\n            } = this,\n            imgSize = key === 'width' ? imgwidth : imgheight;\n          let scale = 1;\n          // Scale and center the image within its container. The name\n          // `backgroundSize` is taken from the CSS spec, but the\n          // value `within` is made up. Other possible values in the\n          // spec, `cover` and `contain`, can be implemented if\n          // needed.\n          if (options && options.backgroundSize === 'within' && width && height && imgwidth && imgheight) {\n            scale = Math.min(width / imgwidth, height / imgheight);\n            // Update both width and height to keep the ratio\n            // correct (#17315)\n            attr(element, {\n              width: Math.round(imgwidth * scale),\n              height: Math.round(imgheight * scale)\n            });\n          } else if (element && imgSize) {\n            element.setAttribute(key, imgSize);\n          }\n          if (!alignByTranslate && imgwidth && imgheight) {\n            this.translate(((width || 0) - imgwidth * scale) / 2, ((height || 0) - imgheight * scale) / 2);\n          }\n        };\n      });\n      if (defined(x)) {\n        img.attr({\n          x: x,\n          y: y\n        });\n      }\n      img.isImg = true;\n      if (defined(img.imgwidth) && defined(img.imgheight)) {\n        centerImage(img);\n      } else {\n        // Initialize image to be 0 size so export will still function\n        // if there's no cached sizes.\n        img.attr({\n          width: 0,\n          height: 0\n        });\n        // Create a dummy JavaScript image to get the width and height.\n        createElement('img', {\n          onload: function () {\n            const chart = charts[ren.chartIndex];\n            // Special case for SVGs on IE11, the width is not\n            // accessible until the image is part of the DOM\n            // (#2854).\n            if (this.width === 0) {\n              css(this, {\n                position: 'absolute',\n                top: '-999em'\n              });\n              doc.body.appendChild(this);\n            }\n            // Center the image\n            symbolSizes[imageSrc] = {\n              width: this.width,\n              height: this.height\n            };\n            img.imgwidth = this.width;\n            img.imgheight = this.height;\n            if (img.element) {\n              centerImage(img);\n            }\n            // Clean up after #2854 workaround.\n            if (this.parentNode) {\n              this.parentNode.removeChild(this);\n            }\n            // Fire the load event when all external images are\n            // loaded\n            ren.imgCount--;\n            if (!ren.imgCount && chart && !chart.hasLoaded) {\n              chart.onload();\n            }\n          },\n          src: imageSrc\n        });\n        this.imgCount++;\n      }\n    }\n    return obj;\n  }\n  /**\n   * Define a clipping rectangle. The clipping rectangle is later applied\n   * to {@link SVGElement} objects through the {@link SVGElement#clip}\n   * function.\n   *\n   * @example\n   * let circle = renderer.circle(100, 100, 100)\n   *     .attr({ fill: 'red' })\n   *     .add();\n   * let clipRect = renderer.clipRect(100, 100, 100, 100);\n   *\n   * // Leave only the lower right quarter visible\n   * circle.clip(clipRect);\n   *\n   * @function Highcharts.SVGRenderer#clipRect\n   *\n   * @param {number} [x]\n   *\n   * @param {number} [y]\n   *\n   * @param {number} [width]\n   *\n   * @param {number} [height]\n   *\n   * @return {Highcharts.ClipRectElement}\n   *         A clipping rectangle.\n   */\n  clipRect(x, y, width, height) {\n    const\n      // Add a hyphen at the end to avoid confusion in testing indexes\n      // -1 and -10, -11 etc (#6550)\n      id = uniqueKey() + '-',\n      clipPath = this.createElement('clipPath').attr({\n        id: id\n      }).add(this.defs),\n      wrapper = this.rect(x, y, width, height, 0).add(clipPath);\n    wrapper.id = id;\n    wrapper.clipPath = clipPath;\n    wrapper.count = 0;\n    return wrapper;\n  }\n  /**\n   * Draw text. The text can contain a subset of HTML, like spans and anchors\n   * and some basic text styling of these. For more advanced features like\n   * border and background, use {@link Highcharts.SVGRenderer#label} instead.\n   * To update the text after render, run `text.attr({ text: 'New text' })`.\n   *\n   * @sample highcharts/members/renderer-text-on-chart/\n   *         Annotate the chart freely\n   * @sample highcharts/members/renderer-on-chart/\n   *         Annotate with a border and in response to the data\n   * @sample highcharts/members/renderer-text/\n   *         Formatted text\n   *\n   * @function Highcharts.SVGRenderer#text\n   *\n   * @param {string} [str]\n   * The text of (subset) HTML to draw.\n   *\n   * @param {number} [x]\n   * The x position of the text's lower left corner.\n   *\n   * @param {number} [y]\n   * The y position of the text's lower left corner.\n   *\n   * @param {boolean} [useHTML=false]\n   * Use HTML to render the text.\n   *\n   * @return {Highcharts.SVGElement}\n   * The text object.\n   */\n  text(str, x, y, useHTML) {\n    const renderer = this,\n      attribs = {};\n    if (useHTML && (renderer.allowHTML || !renderer.forExport)) {\n      return renderer.html(str, x, y);\n    }\n    attribs.x = Math.round(x || 0); // X always needed for line-wrap logic\n    if (y) {\n      attribs.y = Math.round(y);\n    }\n    if (defined(str)) {\n      attribs.text = str;\n    }\n    const wrapper = renderer.createElement('text').attr(attribs);\n    if (!useHTML || renderer.forExport && !renderer.allowHTML) {\n      wrapper.xSetter = function (value, key, element) {\n        const tspans = element.getElementsByTagName('tspan'),\n          parentVal = element.getAttribute(key);\n        for (let i = 0, tspan; i < tspans.length; i++) {\n          tspan = tspans[i];\n          // If the x values are equal, the tspan represents a line\n          // break\n          if (tspan.getAttribute(key) === parentVal) {\n            tspan.setAttribute(key, value);\n          }\n        }\n        element.setAttribute(key, value);\n      };\n    }\n    return wrapper;\n  }\n  /**\n   * Utility to return the baseline offset and total line height from the font\n   * size.\n   *\n   * @function Highcharts.SVGRenderer#fontMetrics\n   *\n   * @param {Highcharts.SVGElement|Highcharts.SVGDOMElement|number} [element]\n   *        The element to inspect for a current font size. If a number is\n   *        given, it's used as a fall back for direct font size in pixels.\n   *\n   * @return {Highcharts.FontMetricsObject}\n   *         The font metrics.\n   */\n  fontMetrics(element) {\n    const f = pInt(SVGElement.prototype.getStyle.call(element, 'font-size') || 0);\n    // Empirical values found by comparing font size and bounding box\n    // height. Applies to the default font family.\n    // https://jsfiddle.net/highcharts/7xvn7/\n    const h = f < 24 ? f + 3 : Math.round(f * 1.2),\n      b = Math.round(h * 0.8);\n    return {\n      // Line height\n      h,\n      // Baseline\n      b,\n      // Font size\n      f\n    };\n  }\n  /**\n   * Correct X and Y positioning of a label for rotation (#1764).\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#rotCorr\n   */\n  rotCorr(baseline, rotation, alterY) {\n    let y = baseline;\n    if (rotation && alterY) {\n      y = Math.max(y * Math.cos(rotation * deg2rad), 4);\n    }\n    return {\n      x: -baseline / 3 * Math.sin(rotation * deg2rad),\n      y: y\n    };\n  }\n  /**\n   * Compatibility function to convert the legacy one-dimensional path array\n   * into an array of segments.\n   *\n   * It is used in maps to parse the `path` option, and in SVGRenderer.dSetter\n   * to support legacy paths from demos.\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#pathToSegments\n   */\n  pathToSegments(path) {\n    const ret = [];\n    const segment = [];\n    const commandLength = {\n      A: 8,\n      C: 7,\n      H: 2,\n      L: 3,\n      M: 3,\n      Q: 5,\n      S: 5,\n      T: 3,\n      V: 2\n    };\n    // Short, non-typesafe parsing of the one-dimensional array. It splits\n    // the path on any string. This is not type checked against the tuple\n    // types, but is shorter, and doesn't require specific checks for any\n    // command type in SVG.\n    for (let i = 0; i < path.length; i++) {\n      // Command skipped, repeat previous or insert L/l for M/m\n      if (isString(segment[0]) && isNumber(path[i]) && segment.length === commandLength[segment[0].toUpperCase()]) {\n        path.splice(i, 0, segment[0].replace('M', 'L').replace('m', 'l'));\n      }\n      // Split on string\n      if (typeof path[i] === 'string') {\n        if (segment.length) {\n          ret.push(segment.slice(0));\n        }\n        segment.length = 0;\n      }\n      segment.push(path[i]);\n    }\n    ret.push(segment.slice(0));\n    return ret;\n    /*\n    // Fully type-safe version where each tuple type is checked. The\n    // downside is filesize and a lack of flexibility for unsupported\n    // commands\n    const ret: SVGPath = [],\n        commands = {\n            A: 7,\n            C: 6,\n            H: 1,\n            L: 2,\n            M: 2,\n            Q: 4,\n            S: 4,\n            T: 2,\n            V: 1,\n            Z: 0\n        };\n     let i = 0,\n        lastI = 0,\n        lastCommand;\n     while (i < path.length) {\n        const item = path[i];\n         let command;\n         if (typeof item === 'string') {\n            command = item;\n            i += 1;\n        } else {\n            command = lastCommand || 'M';\n        }\n         // Upper case\n        const commandUC = command.toUpperCase();\n         if (commandUC in commands) {\n             // No numeric parameters\n            if (command === 'Z' || command === 'z') {\n                ret.push([command]);\n             // One numeric parameter\n            } else {\n                const val0 = path[i];\n                if (typeof val0 === 'number') {\n                     // Horizontal line to\n                    if (command === 'H' || command === 'h') {\n                        ret.push([command, val0]);\n                        i += 1;\n                     // Vertical line to\n                    } else if (command === 'V' || command === 'v') {\n                        ret.push([command, val0]);\n                        i += 1;\n                     // Two numeric parameters\n                    } else {\n                        const val1 = path[i + 1];\n                        if (typeof val1 === 'number') {\n                            // lineTo\n                            if (command === 'L' || command === 'l') {\n                                ret.push([command, val0, val1]);\n                                i += 2;\n                             // moveTo\n                            } else if (command === 'M' || command === 'm') {\n                                ret.push([command, val0, val1]);\n                                i += 2;\n                             // Smooth quadratic bezier\n                            } else if (command === 'T' || command === 't') {\n                                ret.push([command, val0, val1]);\n                                i += 2;\n                             // Four numeric parameters\n                            } else {\n                                const val2 = path[i + 2],\n                                    val3 = path[i + 3];\n                                if (\n                                    typeof val2 === 'number' &&\n                                    typeof val3 === 'number'\n                                ) {\n                                    // Quadratic bezier to\n                                    if (\n                                        command === 'Q' ||\n                                        command === 'q'\n                                    ) {\n                                        ret.push([\n                                            command,\n                                            val0,\n                                            val1,\n                                            val2,\n                                            val3\n                                        ]);\n                                        i += 4;\n                                     // Smooth cubic bezier to\n                                    } else if (\n                                        command === 'S' ||\n                                        command === 's'\n                                    ) {\n                                        ret.push([\n                                            command,\n                                            val0,\n                                            val1,\n                                            val2,\n                                            val3\n                                        ]);\n                                        i += 4;\n                                     // Six numeric parameters\n                                    } else {\n                                        const val4 = path[i + 4],\n                                            val5 = path[i + 5];\n                                         if (\n                                            typeof val4 === 'number' &&\n                                            typeof val5 === 'number'\n                                        ) {\n                                            // Curve to\n                                            if (\n                                                command === 'C' ||\n                                                command === 'c'\n                                            ) {\n                                                ret.push([\n                                                    command,\n                                                    val0,\n                                                    val1,\n                                                    val2,\n                                                    val3,\n                                                    val4,\n                                                    val5\n                                                ]);\n                                                i += 6;\n                                             // Seven numeric parameters\n                                            } else {\n                                                const val6 = path[i + 6];\n                                                 // Arc to\n                                                if (\n                                                    typeof val6 ===\n                                                    'number' &&\n                                                    (\n                                                        command === 'A' ||\n                                                        command === 'a'\n                                                    )\n                                                ) {\n                                                    ret.push([\n                                                        command,\n                                                        val0,\n                                                        val1,\n                                                        val2,\n                                                        val3,\n                                                        val4,\n                                                        val5,\n                                                        val6\n                                                    ]);\n                                                    i += 7;\n                                                 }\n                                             }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                     }\n                }\n            }\n        }\n         // An unmarked command following a moveTo is a lineTo\n        lastCommand = command === 'M' ? 'L' : command;\n         if (i === lastI) {\n            break;\n        }\n        lastI = i;\n    }\n    return ret;\n    */\n  }\n  /**\n   * Draw a label, which is an extended text element with support for border\n   * and background. Highcharts creates a `g` element with a text and a `path`\n   * or `rect` inside, to make it behave somewhat like a HTML div. Border and\n   * background are set through `stroke`, `stroke-width` and `fill` attributes\n   * using the {@link Highcharts.SVGElement#attr|attr} method. To update the\n   * text after render, run `label.attr({ text: 'New text' })`.\n   *\n   * @sample highcharts/members/renderer-label-on-chart/\n   *         A label on the chart\n   *\n   * @function Highcharts.SVGRenderer#label\n   *\n   * @param {string} str\n   *        The initial text string or (subset) HTML to render.\n   *\n   * @param {number} x\n   *        The x position of the label's left side.\n   *\n   * @param {number} [y]\n   *        The y position of the label's top side or baseline, depending on\n   *        the `baseline` parameter.\n   *\n   * @param {string} [shape='rect']\n   *        The shape of the label's border/background, if any. Defaults to\n   *        `rect`. Other possible values are `callout` or other shapes\n   *        defined in {@link Highcharts.SVGRenderer#symbols}.\n   *\n   * @param {number} [anchorX]\n   *        In case the `shape` has a pointer, like a flag, this is the\n   *        coordinates it should be pinned to.\n   *\n   * @param {number} [anchorY]\n   *        In case the `shape` has a pointer, like a flag, this is the\n   *        coordinates it should be pinned to.\n   *\n   * @param {boolean} [useHTML=false]\n   *        Whether to use HTML to render the label.\n   *\n   * @param {boolean} [baseline=false]\n   *        Whether to position the label relative to the text baseline,\n   *        like {@link Highcharts.SVGRenderer#text|renderer.text}, or to the\n   *        upper border of the rectangle.\n   *\n   * @param {string} [className]\n   *        Class name for the group.\n   *\n   * @return {Highcharts.SVGElement}\n   *         The generated label.\n   */\n  label(str, x, y, shape, anchorX, anchorY, useHTML, baseline, className) {\n    return new SVGLabel(this, str, x, y, shape, anchorX, anchorY, useHTML, baseline, className);\n  }\n  /**\n   * Re-align all aligned elements.\n   *\n   * @private\n   * @function Highcharts.SVGRenderer#alignElements\n   */\n  alignElements() {\n    this.alignedObjects.forEach(el => el.align());\n  }\n}\nextend(SVGRenderer.prototype, {\n  /**\n   * A pointer to the renderer's associated Element class.\n   *\n   * @name Highcharts.SVGRenderer#Element\n   * @type {Highcharts.SVGElement}\n   */\n  Element: SVGElement,\n  SVG_NS,\n  /**\n   * A collection of characters mapped to HTML entities. When `useHTML` on an\n   * element is true, these entities will be rendered correctly by HTML. In\n   * the SVG pseudo-HTML, they need to be unescaped back to simple characters,\n   * so for example `&lt;` will render as `<`.\n   *\n   * @example\n   * // Add support for unescaping quotes\n   * Highcharts.SVGRenderer.prototype.escapes['\"'] = '&quot;';\n   *\n   * @name Highcharts.SVGRenderer#escapes\n   * @type {Highcharts.Dictionary<string>}\n   */\n  escapes: {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    \"'\": '&#39;',\n    '\"': '&quot;'\n  },\n  /**\n   * An extendable collection of functions for defining symbol paths.\n   *\n   * @name Highcharts.SVGRenderer#symbols\n   * @type {Highcharts.SymbolDictionary}\n   */\n  symbols: Symbols,\n  /**\n   * Dummy function for plugins, called every time the renderer is updated.\n   * Prior to Highcharts 5, this was used for the canvg renderer.\n   *\n   * @deprecated\n   * @function Highcharts.SVGRenderer#draw\n   */\n  draw: noop\n});\n/* *\n *\n *  Registry\n *\n * */\nRendererRegistry.registerRendererType('svg', SVGRenderer, true);\n/* *\n *\n *  Export Default\n *\n * */\nexport default SVGRenderer;\n/* *\n *\n *  API Declarations\n *\n * */\n/**\n * A clipping rectangle that can be applied to one or more {@link SVGElement}\n * instances. It is instanciated with the {@link SVGRenderer#clipRect} function\n * and applied with the {@link SVGElement#clip} function.\n *\n * @example\n * let circle = renderer.circle(100, 100, 100)\n *     .attr({ fill: 'red' })\n *     .add();\n * let clipRect = renderer.clipRect(100, 100, 100, 100);\n *\n * // Leave only the lower right quarter visible\n * circle.clip(clipRect);\n *\n * @typedef {Highcharts.SVGElement} Highcharts.ClipRectElement\n */\n/**\n * The font metrics.\n *\n * @interface Highcharts.FontMetricsObject\n */ /**\n    * The baseline relative to the top of the box.\n    *\n    * @name Highcharts.FontMetricsObject#b\n    * @type {number}\n    */ /**\n       * The font size.\n       *\n       * @name Highcharts.FontMetricsObject#f\n       * @type {number}\n       */ /**\n          * The line height.\n          *\n          * @name Highcharts.FontMetricsObject#h\n          * @type {number}\n          */\n/**\n * An object containing `x` and `y` properties for the position of an element.\n *\n * @interface Highcharts.PositionObject\n */ /**\n    * X position of the element.\n    * @name Highcharts.PositionObject#x\n    * @type {number}\n    */ /**\n       * Y position of the element.\n       * @name Highcharts.PositionObject#y\n       * @type {number}\n       */\n/**\n * A rectangle.\n *\n * @interface Highcharts.RectangleObject\n */ /**\n    * Height of the rectangle.\n    * @name Highcharts.RectangleObject#height\n    * @type {number}\n    */ /**\n       * Width of the rectangle.\n       * @name Highcharts.RectangleObject#width\n       * @type {number}\n       */ /**\n          * Horizontal position of the rectangle.\n          * @name Highcharts.RectangleObject#x\n          * @type {number}\n          */ /**\n             * Vertical position of the rectangle.\n             * @name Highcharts.RectangleObject#y\n             * @type {number}\n             */\n/**\n * The shadow options.\n *\n * @interface Highcharts.ShadowOptionsObject\n */ /**\n    * The shadow color.\n    * @name    Highcharts.ShadowOptionsObject#color\n    * @type    {Highcharts.ColorString|undefined}\n    * @default #000000\n    */ /**\n       * The horizontal offset from the element.\n       *\n       * @name    Highcharts.ShadowOptionsObject#offsetX\n       * @type    {number|undefined}\n       * @default 1\n       */ /**\n          * The vertical offset from the element.\n          * @name    Highcharts.ShadowOptionsObject#offsetY\n          * @type    {number|undefined}\n          * @default 1\n          */ /**\n             * The shadow opacity.\n             *\n             * @name    Highcharts.ShadowOptionsObject#opacity\n             * @type    {number|undefined}\n             * @default 0.15\n             */ /**\n                * The shadow width or distance from the element.\n                * @name    Highcharts.ShadowOptionsObject#width\n                * @type    {number|undefined}\n                * @default 3\n                */\n/**\n * @interface Highcharts.SizeObject\n */ /**\n    * @name Highcharts.SizeObject#height\n    * @type {number}\n    */ /**\n       * @name Highcharts.SizeObject#width\n       * @type {number}\n       */\n/**\n * Array of path commands, that will go into the `d` attribute of an SVG\n * element.\n *\n * @typedef {Array<(Array<Highcharts.SVGPathCommand>|Array<Highcharts.SVGPathCommand,number>|Array<Highcharts.SVGPathCommand,number,number>|Array<Highcharts.SVGPathCommand,number,number,number,number>|Array<Highcharts.SVGPathCommand,number,number,number,number,number,number>|Array<Highcharts.SVGPathCommand,number,number,number,number,number,number,number>)>} Highcharts.SVGPathArray\n */\n/**\n * Possible path commands in an SVG path array. Valid values are `A`, `C`, `H`,\n * `L`, `M`, `Q`, `S`, `T`, `V`, `Z`.\n *\n * @typedef {string} Highcharts.SVGPathCommand\n * @validvalue [\"a\",\"c\",\"h\",\"l\",\"m\",\"q\",\"s\",\"t\",\"v\",\"z\",\"A\",\"C\",\"H\",\"L\",\"M\",\"Q\",\"S\",\"T\",\"V\",\"Z\"]\n */\n/**\n * An extendable collection of functions for defining symbol paths. Symbols are\n * used internally for point markers, button and label borders and backgrounds,\n * or custom shapes. Extendable by adding to {@link SVGRenderer#symbols}.\n *\n * @interface Highcharts.SymbolDictionary\n */ /**\n    * @name Highcharts.SymbolDictionary#[key:string]\n    * @type {Function|undefined}\n    */ /**\n       * @name Highcharts.SymbolDictionary#arc\n       * @type {Function|undefined}\n       */ /**\n          * @name Highcharts.SymbolDictionary#callout\n          * @type {Function|undefined}\n          */ /**\n             * @name Highcharts.SymbolDictionary#circle\n             * @type {Function|undefined}\n             */ /**\n                * @name Highcharts.SymbolDictionary#diamond\n                * @type {Function|undefined}\n                */ /**\n                   * @name Highcharts.SymbolDictionary#square\n                   * @type {Function|undefined}\n                   */ /**\n                      * @name Highcharts.SymbolDictionary#triangle\n                      * @type {Function|undefined}\n                      */\n/**\n * Can be one of `arc`, `callout`, `circle`, `diamond`, `square`, `triangle`,\n * and `triangle-down`. Symbols are used internally for point markers, button\n * and label borders and backgrounds, or custom shapes. Extendable by adding to\n * {@link SVGRenderer#symbols}.\n *\n * @typedef {\"arc\"|\"callout\"|\"circle\"|\"diamond\"|\"square\"|\"triangle\"|\"triangle-down\"} Highcharts.SymbolKeyValue\n */\n/**\n * Additional options, depending on the actual symbol drawn.\n *\n * @interface Highcharts.SymbolOptionsObject\n */ /**\n    * The anchor X position for the `callout` symbol. This is where the chevron\n    * points to.\n    *\n    * @name Highcharts.SymbolOptionsObject#anchorX\n    * @type {number|undefined}\n    */ /**\n       * The anchor Y position for the `callout` symbol. This is where the chevron\n       * points to.\n       *\n       * @name Highcharts.SymbolOptionsObject#anchorY\n       * @type {number|undefined}\n       */ /**\n          * The end angle of an `arc` symbol.\n          *\n          * @name Highcharts.SymbolOptionsObject#end\n          * @type {number|undefined}\n          */ /**\n             * Whether to draw `arc` symbol open or closed.\n             *\n             * @name Highcharts.SymbolOptionsObject#open\n             * @type {boolean|undefined}\n             */ /**\n                * The radius of an `arc` symbol, or the border radius for the `callout` symbol.\n                *\n                * @name Highcharts.SymbolOptionsObject#r\n                * @type {number|undefined}\n                */ /**\n                   * The start angle of an `arc` symbol.\n                   *\n                   * @name Highcharts.SymbolOptionsObject#start\n                   * @type {number|undefined}\n                   */\n''; // keeps doclets above in transpiled file","map":{"version":3,"names":["AST","Color","H","charts","deg2rad","doc","isFirefox","isMS","isWebKit","noop","SVG_NS","symbolSizes","win","RendererRegistry","SVGElement","SVGLabel","Symbols","TextBuilder","U","addEvent","attr","createElement","css","defined","destroyObjectProperties","extend","isArray","isNumber","isObject","isString","merge","pick","pInt","uniqueKey","hasInternalReferenceBug","SVGRenderer","constructor","container","width","height","style","forExport","allowHTML","styledMode","alignedObjects","box","boxWrapper","cache","cacheKeys","chartIndex","defs","globalAnimation","gradients","imgCount","url","init","renderer","version","element","getStyle","appendChild","innerHTML","indexOf","getReferenceURL","desc","add","createTextNode","rootFontSize","setSize","subPixelFix","rect","getBoundingClientRect","left","top","Math","ceil","unSubPixelFix","definition","def","ast","addToDOM","getElementsByTagName","length","id","tagName","attributes","children","fill","svg","body","position","zIndex","hitElement","elementFromPoint","removeChild","location","href","split","replace","fontFamily","fontSize","setStyle","isHidden","getBBox","destroy","rendererDefs","nodeName","wrapper","Element","getRadialAttr","radialReference","gradAttr","cx","cy","r","shadowDefinition","shadowOptions","Object","keys","map","key","join","toLowerCase","options","color","offsetX","offsetY","opacity","querySelector","filterUnits","dx","dy","min","stdDeviation","buildText","buildSVG","getContrast","rgba","parse","b8","c","pow","l","button","text","x","y","callback","theme","hoverState","selectState","disabledState","shape","useHTML","label","states","curState","normalStyle","cursor","fontWeight","normalState","filterUserAttributes","padding","hoverStyle","selectStyle","disabledStyle","stroke","hover","select","disabled","setState","state","removeClass","addClass","pointerEvents","on","e","stopPropagation","call","crispLine","points","roundingFunction","start","end","path","attribs","d","circle","xSetter","ySetter","value","setAttribute","arc","innerR","symbol","strokeWidth","max","crisp","rSetter","_key","rx","ry","rGetter","roundedRect","animate","step","viewBox","duration","alignElements","g","name","elem","image","onload","preserveAspectRatio","elemWrapper","onDummyLoad","dummy","Image","src","complete","ren","imageRegex","isImage","test","sym","symbols","symbolFn","obj","imageSrc","centerImage","round","symbolName","match","img","imgwidth","imgheight","forEach","alignByTranslate","imgSize","scale","backgroundSize","translate","isImg","chart","parentNode","hasLoaded","clipRect","clipPath","count","str","html","tspans","parentVal","getAttribute","i","tspan","fontMetrics","f","prototype","h","b","rotCorr","baseline","rotation","alterY","cos","sin","pathToSegments","ret","segment","commandLength","A","C","L","M","Q","S","T","V","toUpperCase","splice","push","slice","anchorX","anchorY","className","el","align","escapes","draw","registerRendererType"],"sources":["D:/Vamtage/angular-widget-project/node_modules/highcharts/es-modules/Core/Renderer/SVG/SVGRenderer.js"],"sourcesContent":["/* *\n *\n *  (c) 2010-2021 Torstein Honsi\n *\n *  License: www.highcharts.com/license\n *\n *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n *\n * */\n'use strict';\nimport AST from '../HTML/AST.js';\nimport Color from '../../Color/Color.js';\nimport H from '../../Globals.js';\nconst { charts, deg2rad, doc, isFirefox, isMS, isWebKit, noop, SVG_NS, symbolSizes, win } = H;\nimport RendererRegistry from '../RendererRegistry.js';\nimport SVGElement from './SVGElement.js';\nimport SVGLabel from './SVGLabel.js';\nimport Symbols from './Symbols.js';\nimport TextBuilder from './TextBuilder.js';\nimport U from '../../Utilities.js';\nconst { addEvent, attr, createElement, css, defined, destroyObjectProperties, extend, isArray, isNumber, isObject, isString, merge, pick, pInt, uniqueKey } = U;\n/* *\n *\n *  Variables\n *\n * */\nlet hasInternalReferenceBug;\n/* *\n *\n *  Class\n *\n * */\n/* eslint-disable no-invalid-this, valid-jsdoc */\n/**\n * Allows direct access to the Highcharts rendering layer in order to draw\n * primitive shapes like circles, rectangles, paths or text directly on a chart,\n * or independent from any chart. The SVGRenderer represents a wrapper object\n * for SVG in modern browsers.\n *\n * An existing chart's renderer can be accessed through {@link Chart.renderer}.\n * The renderer can also be used completely decoupled from a chart.\n *\n * @sample highcharts/members/renderer-on-chart\n *         Annotating a chart programmatically.\n * @sample highcharts/members/renderer-basic\n *         Independent SVG drawing.\n *\n * @example\n * // Use directly without a chart object.\n * let renderer = new Highcharts.Renderer(parentNode, 600, 400);\n *\n * @class\n * @name Highcharts.SVGRenderer\n *\n * @param {Highcharts.HTMLDOMElement} container\n *        Where to put the SVG in the web page.\n *\n * @param {number} width\n *        The width of the SVG.\n *\n * @param {number} height\n *        The height of the SVG.\n *\n * @param {Highcharts.CSSObject} [style]\n *        The box style, if not in styleMode\n *\n * @param {boolean} [forExport=false]\n *        Whether the rendered content is intended for export.\n *\n * @param {boolean} [allowHTML=true]\n *        Whether the renderer is allowed to include HTML text, which will be\n *        projected on top of the SVG.\n *\n * @param {boolean} [styledMode=false]\n *        Whether the renderer belongs to a chart that is in styled mode.\n *        If it does, it will avoid setting presentational attributes in\n *        some cases, but not when set explicitly through `.attr` and `.css`\n *        etc.\n */\nclass SVGRenderer {\n    /* *\n     *\n     *  Constructors\n     *\n     * */\n    constructor(container, width, height, style, forExport, allowHTML, styledMode) {\n        /* *\n         *\n         *  Properties\n         *\n         * */\n        this.alignedObjects = void 0;\n        /**\n         * The root `svg` node of the renderer.\n         *\n         * @name Highcharts.SVGRenderer#box\n         * @type {Highcharts.SVGDOMElement}\n         */\n        this.box = void 0;\n        /**\n         * The wrapper for the root `svg` node of the renderer.\n         *\n         * @name Highcharts.SVGRenderer#boxWrapper\n         * @type {Highcharts.SVGElement}\n         */\n        this.boxWrapper = void 0;\n        this.cache = void 0;\n        this.cacheKeys = void 0;\n        this.chartIndex = void 0;\n        /**\n         * A pointer to the `defs` node of the root SVG.\n         *\n         * @name Highcharts.SVGRenderer#defs\n         * @type {Highcharts.SVGElement}\n         */\n        this.defs = void 0;\n        this.globalAnimation = void 0;\n        this.gradients = void 0;\n        this.height = void 0;\n        this.imgCount = void 0;\n        this.style = void 0;\n        /**\n         * Page url used for internal references.\n         *\n         * @private\n         * @name Highcharts.SVGRenderer#url\n         * @type {string}\n         */\n        this.url = void 0;\n        this.width = void 0;\n        this.init(container, width, height, style, forExport, allowHTML, styledMode);\n    }\n    /* *\n     *\n     *  Functions\n     *\n     * */\n    /**\n     * Initialize the SVGRenderer. Overridable initializer function that takes\n     * the same parameters as the constructor.\n     *\n     * @function Highcharts.SVGRenderer#init\n     *\n     * @param {Highcharts.HTMLDOMElement} container\n     * Where to put the SVG in the web page.\n     *\n     * @param {number} width\n     * The width of the SVG.\n     *\n     * @param {number} height\n     * The height of the SVG.\n     *\n     * @param {Highcharts.CSSObject} [style]\n     * The box style, if not in styleMode\n     *\n     * @param {boolean} [forExport=false]\n     * Whether the rendered content is intended for export.\n     *\n     * @param {boolean} [allowHTML=true]\n     * Whether the renderer is allowed to include HTML text, which will be\n     * projected on top of the SVG.\n     *\n     * @param {boolean} [styledMode=false]\n     * Whether the renderer belongs to a chart that is in styled mode. If it\n     * does, it will avoid setting presentational attributes in some cases, but\n     * not when set explicitly through `.attr` and `.css` etc.\n     */\n    init(container, width, height, style, forExport, allowHTML, styledMode) {\n        const renderer = this, boxWrapper = renderer\n            .createElement('svg')\n            .attr({\n            version: '1.1',\n            'class': 'highcharts-root'\n        }), element = boxWrapper.element;\n        if (!styledMode) {\n            boxWrapper.css(this.getStyle(style));\n        }\n        container.appendChild(element);\n        // Always use ltr on the container, otherwise text-anchor will be\n        // flipped and text appear outside labels, buttons, tooltip etc (#3482)\n        attr(container, 'dir', 'ltr');\n        // For browsers other than IE, add the namespace attribute (#1978)\n        if (container.innerHTML.indexOf('xmlns') === -1) {\n            attr(element, 'xmlns', this.SVG_NS);\n        }\n        this.box = element;\n        this.boxWrapper = boxWrapper;\n        renderer.alignedObjects = [];\n        this.url = this.getReferenceURL();\n        // Add description\n        const desc = this.createElement('desc').add();\n        desc.element.appendChild(doc.createTextNode('Created with Highcharts 11.2.0'));\n        renderer.defs = this.createElement('defs').add();\n        renderer.allowHTML = allowHTML;\n        renderer.forExport = forExport;\n        renderer.styledMode = styledMode;\n        renderer.gradients = {}; // Object where gradient SvgElements are stored\n        renderer.cache = {}; // Cache for numerical bounding boxes\n        renderer.cacheKeys = [];\n        renderer.imgCount = 0;\n        renderer.rootFontSize = boxWrapper.getStyle('font-size');\n        renderer.setSize(width, height, false);\n        // Issue 110 workaround:\n        // In Firefox, if a div is positioned by percentage, its pixel position\n        // may land between pixels. The container itself doesn't display this,\n        // but an SVG element inside this container will be drawn at subpixel\n        // precision. In order to draw sharp lines, this must be compensated\n        // for. This doesn't seem to work inside iframes though (like in\n        // jsFiddle).\n        let subPixelFix, rect;\n        if (isFirefox && container.getBoundingClientRect) {\n            subPixelFix = function () {\n                css(container, { left: 0, top: 0 });\n                rect = container.getBoundingClientRect();\n                css(container, {\n                    left: (Math.ceil(rect.left) - rect.left) + 'px',\n                    top: (Math.ceil(rect.top) - rect.top) + 'px'\n                });\n            };\n            // run the fix now\n            subPixelFix();\n            // run it on resize\n            renderer.unSubPixelFix = addEvent(win, 'resize', subPixelFix);\n        }\n    }\n    /**\n     * General method for adding a definition to the SVG `defs` tag. Can be used\n     * for gradients, fills, filters etc. Styled mode only. A hook for adding\n     * general definitions to the SVG's defs tag. Definitions can be referenced\n     * from the CSS by its `id`. Read more in\n     * [gradients, shadows and patterns](https://www.highcharts.com/docs/chart-design-and-style/gradients-shadows-and-patterns).\n     * Styled mode only.\n     *\n     * @function Highcharts.SVGRenderer#definition\n     *\n     * @param {Highcharts.ASTNode} def\n     * A serialized form of an SVG definition, including children.\n     *\n     * @return {Highcharts.SVGElement}\n     * The inserted node.\n     */\n    definition(def) {\n        const ast = new AST([def]);\n        return ast.addToDOM(this.defs.element);\n    }\n    /**\n     * Get the prefix needed for internal URL references to work in certain\n     * cases. Some older browser versions had a bug where internal url\n     * references in SVG attributes, on the form `url(#some-id)`, would fail if\n     * a base tag was present in the page. There were also issues with\n     * `history.pushState` related to this prefix.\n     *\n     * Related issues: #24, #672, #1070, #5244.\n     *\n     * The affected browsers are:\n     * - Chrome <= 53 (May 2018)\n     * - Firefox <= 51 (January 2017)\n     * - Safari/Mac <= 12.1 (2018 or 2019)\n     * - Safari/iOS <= 13\n     *\n     * @todo Remove this hack when time has passed. All the affected browsers\n     * are evergreens, so it is increasingly unlikely that users are affected by\n     * the bug.\n     *\n     * @return {string}\n     * The prefix to use. An empty string for modern browsers.\n     */\n    getReferenceURL() {\n        if ((isFirefox || isWebKit) &&\n            doc.getElementsByTagName('base').length) {\n            // Detect if a clip path is taking effect by performing a hit test\n            // outside the clipped area. If the hit element is the rectangle\n            // that was supposed to be clipped, the bug is present. This only\n            // has to be performed once per page load, so we store the result\n            // locally in the module.\n            if (!defined(hasInternalReferenceBug)) {\n                const id = uniqueKey();\n                const ast = new AST([{\n                        tagName: 'svg',\n                        attributes: {\n                            width: 8,\n                            height: 8\n                        },\n                        children: [{\n                                tagName: 'defs',\n                                children: [{\n                                        tagName: 'clipPath',\n                                        attributes: {\n                                            id\n                                        },\n                                        children: [{\n                                                tagName: 'rect',\n                                                attributes: {\n                                                    width: 4,\n                                                    height: 4\n                                                }\n                                            }]\n                                    }]\n                            }, {\n                                tagName: 'rect',\n                                attributes: {\n                                    id: 'hitme',\n                                    width: 8,\n                                    height: 8,\n                                    'clip-path': `url(#${id})`,\n                                    fill: 'rgba(0,0,0,0.001)'\n                                }\n                            }]\n                    }]);\n                const svg = ast.addToDOM(doc.body);\n                css(svg, {\n                    position: 'fixed',\n                    top: 0,\n                    left: 0,\n                    zIndex: 9e5\n                });\n                const hitElement = doc.elementFromPoint(6, 6);\n                hasInternalReferenceBug = (hitElement && hitElement.id) === 'hitme';\n                doc.body.removeChild(svg);\n            }\n            if (hasInternalReferenceBug) {\n                return win.location.href\n                    .split('#')[0] // remove the hash\n                    .replace(/<[^>]*>/g, '') // wing cut HTML\n                    // escape parantheses and quotes\n                    .replace(/([\\('\\)])/g, '\\\\$1')\n                    // replace spaces (needed for Safari only)\n                    .replace(/ /g, '%20');\n            }\n        }\n        return '';\n    }\n    /**\n     * Get the global style setting for the renderer.\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#getStyle\n     *\n     * @param {Highcharts.CSSObject} style\n     * Style settings.\n     *\n     * @return {Highcharts.CSSObject}\n     * The style settings mixed with defaults.\n     */\n    getStyle(style) {\n        this.style = extend({\n            fontFamily: 'Helvetica, Arial, sans-serif',\n            fontSize: '1rem'\n        }, style);\n        return this.style;\n    }\n    /**\n     * Apply the global style on the renderer, mixed with the default styles.\n     *\n     * @function Highcharts.SVGRenderer#setStyle\n     *\n     * @param {Highcharts.CSSObject} style\n     * CSS to apply.\n     */\n    setStyle(style) {\n        this.boxWrapper.css(this.getStyle(style));\n    }\n    /**\n     * Detect whether the renderer is hidden. This happens when one of the\n     * parent elements has `display: none`. Used internally to detect when we\n     * needto render preliminarily in another div to get the text bounding boxes\n     * right.\n     *\n     * @function Highcharts.SVGRenderer#isHidden\n     *\n     * @return {boolean}\n     * True if it is hidden.\n     */\n    isHidden() {\n        return !this.boxWrapper.getBBox().width;\n    }\n    /**\n     * Destroys the renderer and its allocated members.\n     *\n     * @function Highcharts.SVGRenderer#destroy\n     *\n     * @return {null}\n     * Pass through value.\n     */\n    destroy() {\n        const renderer = this, rendererDefs = renderer.defs;\n        renderer.box = null;\n        renderer.boxWrapper = renderer.boxWrapper.destroy();\n        // Call destroy on all gradient elements\n        destroyObjectProperties(renderer.gradients || {});\n        renderer.gradients = null;\n        renderer.defs = rendererDefs.destroy();\n        // Remove sub pixel fix handler (#982)\n        if (renderer.unSubPixelFix) {\n            renderer.unSubPixelFix();\n        }\n        renderer.alignedObjects = null;\n        return null;\n    }\n    /**\n     * Create a wrapper for an SVG element. Serves as a factory for\n     * {@link SVGElement}, but this function is itself mostly called from\n     * primitive factories like {@link SVGRenderer#path}, {@link\n     * SVGRenderer#rect} or {@link SVGRenderer#text}.\n     *\n     * @function Highcharts.SVGRenderer#createElement\n     *\n     * @param {string} nodeName\n     * The node name, for example `rect`, `g` etc.\n     *\n     * @return {Highcharts.SVGElement}\n     * The generated SVGElement.\n     */\n    createElement(nodeName) {\n        const wrapper = new this.Element();\n        wrapper.init(this, nodeName);\n        return wrapper;\n    }\n    /**\n     * Get converted radial gradient attributes according to the radial\n     * reference. Used internally from the {@link SVGElement#colorGradient}\n     * function.\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#getRadialAttr\n     */\n    getRadialAttr(radialReference, gradAttr) {\n        return {\n            cx: (radialReference[0] - radialReference[2] / 2) +\n                (gradAttr.cx || 0) * radialReference[2],\n            cy: (radialReference[1] - radialReference[2] / 2) +\n                (gradAttr.cy || 0) * radialReference[2],\n            r: (gradAttr.r || 0) * radialReference[2]\n        };\n    }\n    /**\n     * Create a drop shadow definition and return its id\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#shadowDefinition\n     *\n     * @param {boolean|Highcharts.ShadowOptionsObject} [shadowOptions] The\n     *        shadow options. If `true`, the default options are applied\n     */\n    shadowDefinition(shadowOptions) {\n        const id = [\n            `highcharts-drop-shadow-${this.chartIndex}`,\n            ...Object.keys(shadowOptions)\n                .map((key) => `${key}-${shadowOptions[key]}`)\n        ].join('-').toLowerCase().replace(/[^a-z0-9\\-]/g, ''), options = merge({\n            color: '#000000',\n            offsetX: 1,\n            offsetY: 1,\n            opacity: 0.15,\n            width: 5\n        }, shadowOptions);\n        if (!this.defs.element.querySelector(`#${id}`)) {\n            this.definition({\n                tagName: 'filter',\n                attributes: {\n                    id,\n                    filterUnits: options.filterUnits\n                },\n                children: [{\n                        tagName: 'feDropShadow',\n                        attributes: {\n                            dx: options.offsetX,\n                            dy: options.offsetY,\n                            'flood-color': options.color,\n                            // Tuned and modified to keep a preserve compatibility\n                            // with the old settings\n                            'flood-opacity': Math.min(options.opacity * 5, 1),\n                            stdDeviation: options.width / 2\n                        }\n                    }]\n            });\n        }\n        return id;\n    }\n    /**\n     * Parse a simple HTML string into SVG tspans. Called internally when text\n     * is set on an SVGElement. The function supports a subset of HTML tags, CSS\n     * text features like `width`, `text-overflow`, `white-space`, and also\n     * attributes like `href` and `style`.\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#buildText\n     *\n     * @param {Highcharts.SVGElement} wrapper\n     * The parent SVGElement.\n     */\n    buildText(wrapper) {\n        new TextBuilder(wrapper).buildSVG();\n    }\n    /**\n     * Returns white for dark colors and black for bright colors, based on W3C's\n     * definition of [Relative luminance](\n     * https://www.w3.org/WAI/GL/wiki/Relative_luminance).\n     *\n     * @function Highcharts.SVGRenderer#getContrast\n     *\n     * @param {Highcharts.ColorString} color\n     * The color to get the contrast for.\n     *\n     * @return {Highcharts.ColorString}\n     * The contrast color, either `#000000` or `#FFFFFF`.\n     */\n    getContrast(color) {\n        // #6216, #17273\n        const rgba = Color.parse(color).rgba\n            .map((b8) => {\n            const c = b8 / 255;\n            return c <= 0.03928 ?\n                c / 12.92 :\n                Math.pow((c + 0.055) / 1.055, 2.4);\n        });\n        // Relative luminance\n        const l = 0.2126 * rgba[0] + 0.7152 * rgba[1] + 0.0722 * rgba[2];\n        // Use white or black based on which provides more contrast\n        return 1.05 / (l + 0.05) > (l + 0.05) / 0.05 ? '#FFFFFF' : '#000000';\n    }\n    /**\n     * Create a button with preset states.\n     *\n     * @function Highcharts.SVGRenderer#button\n     *\n     * @param {string} text\n     * The text or HTML to draw.\n     *\n     * @param {number} x\n     * The x position of the button's left side.\n     *\n     * @param {number} y\n     * The y position of the button's top side.\n     *\n     * @param {Highcharts.EventCallbackFunction<Highcharts.SVGElement>} callback\n     * The function to execute on button click or touch.\n     *\n     * @param {Highcharts.SVGAttributes} [theme]\n     * SVG attributes for the normal state.\n     *\n     * @param {Highcharts.SVGAttributes} [hoverState]\n     * SVG attributes for the hover state.\n     *\n     * @param {Highcharts.SVGAttributes} [selectState]\n     * SVG attributes for the pressed state.\n     *\n     * @param {Highcharts.SVGAttributes} [disabledState]\n     * SVG attributes for the disabled state.\n     *\n     * @param {Highcharts.SymbolKeyValue} [shape=rect]\n     * The shape type.\n     *\n     * @param {boolean} [useHTML=false]\n     * Whether to use HTML to render the label.\n     *\n     * @return {Highcharts.SVGElement}\n     * The button element.\n     */\n    button(text, x, y, callback, theme = {}, hoverState, selectState, disabledState, shape, useHTML) {\n        const label = this.label(text, x, y, shape, void 0, void 0, useHTML, void 0, 'button'), styledMode = this.styledMode, states = theme.states || {};\n        let curState = 0;\n        theme = merge(theme);\n        delete theme.states;\n        const normalStyle = merge({\n            color: \"#333333\" /* Palette.neutralColor80 */,\n            cursor: 'pointer',\n            fontSize: '0.8em',\n            fontWeight: 'normal'\n        }, theme.style);\n        delete theme.style;\n        // Remove stylable attributes. Pass in the ButtonThemeObject and get the\n        // SVGAttributes subset back.\n        let normalState = AST.filterUserAttributes(theme);\n        // Default, non-stylable attributes\n        label.attr(merge({ padding: 8, r: 2 }, normalState));\n        // Presentational. The string type is a mistake, it is just for\n        // compliance with SVGAttribute and is not used in button theme.\n        let hoverStyle, selectStyle, disabledStyle;\n        if (!styledMode) {\n            // Normal state - prepare the attributes\n            normalState = merge({\n                fill: \"#f7f7f7\" /* Palette.neutralColor3 */,\n                stroke: \"#cccccc\" /* Palette.neutralColor20 */,\n                'stroke-width': 1\n            }, normalState);\n            // Hover state\n            hoverState = merge(normalState, {\n                fill: \"#e6e6e6\" /* Palette.neutralColor10 */\n            }, AST.filterUserAttributes(hoverState || states.hover || {}));\n            hoverStyle = hoverState.style;\n            delete hoverState.style;\n            // Pressed state\n            selectState = merge(normalState, {\n                fill: \"#e6e9ff\" /* Palette.highlightColor10 */,\n                style: {\n                    color: \"#000000\" /* Palette.neutralColor100 */,\n                    fontWeight: 'bold'\n                }\n            }, AST.filterUserAttributes(selectState || states.select || {}));\n            selectStyle = selectState.style;\n            delete selectState.style;\n            // Disabled state\n            disabledState = merge(normalState, {\n                style: {\n                    color: \"#cccccc\" /* Palette.neutralColor20 */\n                }\n            }, AST.filterUserAttributes(disabledState || states.disabled || {}));\n            disabledStyle = disabledState.style;\n            delete disabledState.style;\n        }\n        // Add the events. IE9 and IE10 need mouseover and mouseout to function\n        // (#667).\n        addEvent(label.element, isMS ? 'mouseover' : 'mouseenter', function () {\n            if (curState !== 3) {\n                label.setState(1);\n            }\n        });\n        addEvent(label.element, isMS ? 'mouseout' : 'mouseleave', function () {\n            if (curState !== 3) {\n                label.setState(curState);\n            }\n        });\n        label.setState = function (state) {\n            // Hover state is temporary, don't record it\n            if (state !== 1) {\n                label.state = curState = state;\n            }\n            // Update visuals\n            label\n                .removeClass(/highcharts-button-(normal|hover|pressed|disabled)/)\n                .addClass('highcharts-button-' +\n                ['normal', 'hover', 'pressed', 'disabled'][state || 0]);\n            if (!styledMode) {\n                label\n                    .attr([\n                    normalState,\n                    hoverState,\n                    selectState,\n                    disabledState\n                ][state || 0]);\n                const css = [\n                    normalStyle,\n                    hoverStyle,\n                    selectStyle,\n                    disabledStyle\n                ][state || 0];\n                if (isObject(css)) {\n                    label.css(css);\n                }\n            }\n        };\n        // Presentational attributes\n        if (!styledMode) {\n            label\n                .attr(normalState)\n                .css(extend({ cursor: 'default' }, normalStyle));\n            // HTML labels don't need to handle pointer events because click and\n            // mouseenter/mouseleave is bound to the underlying <g> element.\n            // Should this be reconsidered, we need more complex logic to share\n            // events between the <g> and its <div> counterpart, and avoid\n            // triggering mouseenter/mouseleave when hovering from one to the\n            // other (#17440).\n            if (useHTML) {\n                label.text.css({ pointerEvents: 'none' });\n            }\n        }\n        return label\n            .on('touchstart', (e) => e.stopPropagation())\n            .on('click', function (e) {\n            if (curState !== 3) {\n                callback.call(label, e);\n            }\n        });\n    }\n    /**\n     * Make a straight line crisper by not spilling out to neighbour pixels.\n     *\n     * @function Highcharts.SVGRenderer#crispLine\n     *\n     * @param {Highcharts.SVGPathArray} points\n     *        The original points on the format `[['M', 0, 0], ['L', 100, 0]]`.\n     *\n     * @param {number} width\n     *        The width of the line.\n     *\n     * @param {string} [roundingFunction=round]\n     *        The rounding function name on the `Math` object, can be one of\n     *        `round`, `floor` or `ceil`.\n     *\n     * @return {Highcharts.SVGPathArray}\n     *         The original points array, but modified to render crisply.\n     */\n    crispLine(points, width, roundingFunction = 'round') {\n        const start = points[0];\n        const end = points[1];\n        // Normalize to a crisp line\n        if (defined(start[1]) && start[1] === end[1]) {\n            // Substract due to #1129. Now bottom and left axis gridlines behave\n            // the same.\n            start[1] = end[1] =\n                Math[roundingFunction](start[1]) - (width % 2 / 2);\n        }\n        if (defined(start[2]) && start[2] === end[2]) {\n            start[2] = end[2] =\n                Math[roundingFunction](start[2]) + (width % 2 / 2);\n        }\n        return points;\n    }\n    /**\n     * Draw a path, wraps the SVG `path` element.\n     *\n     * @sample highcharts/members/renderer-path-on-chart/\n     *         Draw a path in a chart\n     * @sample highcharts/members/renderer-path/\n     *         Draw a path independent from a chart\n     *\n     * @example\n     * let path = renderer.path(['M', 10, 10, 'L', 30, 30, 'z'])\n     *     .attr({ stroke: '#ff00ff' })\n     *     .add();\n     *\n     * @function Highcharts.SVGRenderer#path\n     *\n     * @param {Highcharts.SVGPathArray} [path]\n     * An SVG path definition in array form.\n     *\n     * @return {Highcharts.SVGElement}\n     * The generated wrapper element.\n     *\n     */ /**\n    * Draw a path, wraps the SVG `path` element.\n    *\n    * @function Highcharts.SVGRenderer#path\n    *\n    * @param {Highcharts.SVGAttributes} [attribs]\n    * The initial attributes.\n    *\n    * @return {Highcharts.SVGElement}\n    * The generated wrapper element.\n    */\n    path(path) {\n        const attribs = (this.styledMode ? {} : {\n            fill: 'none'\n        });\n        if (isArray(path)) {\n            attribs.d = path;\n        }\n        else if (isObject(path)) { // attributes\n            extend(attribs, path);\n        }\n        return this.createElement('path').attr(attribs);\n    }\n    /**\n     * Draw a circle, wraps the SVG `circle` element.\n     *\n     * @sample highcharts/members/renderer-circle/\n     *         Drawing a circle\n     *\n     * @function Highcharts.SVGRenderer#circle\n     *\n     * @param {number} [x]\n     * The center x position.\n     *\n     * @param {number} [y]\n     * The center y position.\n     *\n     * @param {number} [r]\n     * The radius.\n     *\n     * @return {Highcharts.SVGElement}\n     * The generated wrapper element.\n     */ /**\n    * Draw a circle, wraps the SVG `circle` element.\n    *\n    * @function Highcharts.SVGRenderer#circle\n    *\n    * @param {Highcharts.SVGAttributes} [attribs]\n    * The initial attributes.\n    *\n    * @return {Highcharts.SVGElement}\n    * The generated wrapper element.\n    */\n    circle(x, y, r) {\n        const attribs = (isObject(x) ?\n            x :\n            typeof x === 'undefined' ? {} : { x: x, y: y, r: r }), wrapper = this.createElement('circle');\n        // Setting x or y translates to cx and cy\n        wrapper.xSetter = wrapper.ySetter = function (value, key, element) {\n            element.setAttribute('c' + key, value);\n        };\n        return wrapper.attr(attribs);\n    }\n    /**\n     * Draw and return an arc.\n     *\n     * @sample highcharts/members/renderer-arc/\n     *         Drawing an arc\n     *\n     * @function Highcharts.SVGRenderer#arc\n     *\n     * @param {number} [x=0]\n     * Center X position.\n     *\n     * @param {number} [y=0]\n     * Center Y position.\n     *\n     * @param {number} [r=0]\n     * The outer radius' of the arc.\n     *\n     * @param {number} [innerR=0]\n     * Inner radius like used in donut charts.\n     *\n     * @param {number} [start=0]\n     * The starting angle of the arc in radians, where 0 is to the right and\n     * `-Math.PI/2` is up.\n     *\n     * @param {number} [end=0]\n     * The ending angle of the arc in radians, where 0 is to the right and\n     * `-Math.PI/2` is up.\n     *\n     * @return {Highcharts.SVGElement}\n     * The generated wrapper element.\n     */ /**\n    * Draw and return an arc. Overloaded function that takes arguments object.\n    *\n    * @function Highcharts.SVGRenderer#arc\n    *\n    * @param {Highcharts.SVGAttributes} attribs\n    * Initial SVG attributes.\n    *\n    * @return {Highcharts.SVGElement}\n    * The generated wrapper element.\n    */\n    arc(x, y, r, innerR, start, end) {\n        let options;\n        if (isObject(x)) {\n            options = x;\n            y = options.y;\n            r = options.r;\n            innerR = options.innerR;\n            start = options.start;\n            end = options.end;\n            x = options.x;\n        }\n        else {\n            options = { innerR, start, end };\n        }\n        // Arcs are defined as symbols for the ability to set\n        // attributes in attr and animate\n        const arc = this.symbol('arc', x, y, r, r, options);\n        arc.r = r; // #959\n        return arc;\n    }\n    /**\n     * Draw and return a rectangle.\n     *\n     * @function Highcharts.SVGRenderer#rect\n     *\n     * @param {number} [x]\n     * Left position.\n     *\n     * @param {number} [y]\n     * Top position.\n     *\n     * @param {number} [width]\n     * Width of the rectangle.\n     *\n     * @param {number} [height]\n     * Height of the rectangle.\n     *\n     * @param {number} [r]\n     * Border corner radius.\n     *\n     * @param {number} [strokeWidth]\n     * A stroke width can be supplied to allow crisp drawing.\n     *\n     * @return {Highcharts.SVGElement}\n     * The generated wrapper element.\n     */ /**\n    * Draw and return a rectangle.\n    *\n    * @sample highcharts/members/renderer-rect-on-chart/\n    *         Draw a rectangle in a chart\n    * @sample highcharts/members/renderer-rect/\n    *         Draw a rectangle independent from a chart\n    *\n    * @function Highcharts.SVGRenderer#rect\n    *\n    * @param {Highcharts.SVGAttributes} [attributes]\n    * General SVG attributes for the rectangle.\n    *\n    * @return {Highcharts.SVGElement}\n    * The generated wrapper element.\n    */\n    rect(x, y, width, height, r, strokeWidth) {\n        const attribs = (isObject(x) ?\n            x :\n            typeof x === 'undefined' ?\n                {} :\n                {\n                    x,\n                    y,\n                    r,\n                    width: Math.max(width || 0, 0),\n                    height: Math.max(height || 0, 0)\n                }), wrapper = this.createElement('rect');\n        if (!this.styledMode) {\n            if (typeof strokeWidth !== 'undefined') {\n                attribs['stroke-width'] = strokeWidth;\n                extend(attribs, wrapper.crisp(attribs));\n            }\n            attribs.fill = 'none';\n        }\n        wrapper.rSetter = function (value, _key, element) {\n            wrapper.r = value;\n            attr(element, {\n                rx: value,\n                ry: value\n            });\n        };\n        wrapper.rGetter = function () {\n            return wrapper.r || 0;\n        };\n        return wrapper.attr(attribs);\n    }\n    /**\n     * Draw and return a rectangle with advanced corner rounding options.\n     *\n     * @function Highcharts.SVGRenderer#roundedRect\n     *\n     * @param {Highcharts.SVGAttributes} attribs\n     *      Attributes\n     * @return {Highcharts.SVGElement}\n     * The generated wrapper element.\n     */\n    roundedRect(attribs) {\n        return this.symbol('roundedRect').attr(attribs);\n    }\n    /**\n     * Resize the {@link SVGRenderer#box} and re-align all aligned child\n     * elements.\n     *\n     * @sample highcharts/members/renderer-g/\n     *         Show and hide grouped objects\n     *\n     * @function Highcharts.SVGRenderer#setSize\n     *\n     * @param {number} width\n     * The new pixel width.\n     *\n     * @param {number} height\n     * The new pixel height.\n     *\n     * @param {boolean|Partial<Highcharts.AnimationOptionsObject>} [animate=true]\n     * Whether and how to animate.\n     */\n    setSize(width, height, animate) {\n        const renderer = this;\n        renderer.width = width;\n        renderer.height = height;\n        renderer.boxWrapper.animate({\n            width: width,\n            height: height\n        }, {\n            step: function () {\n                this.attr({\n                    viewBox: '0 0 ' + this.attr('width') + ' ' +\n                        this.attr('height')\n                });\n            },\n            duration: pick(animate, true) ? void 0 : 0\n        });\n        renderer.alignElements();\n    }\n    /**\n     * Create and return an svg group element. Child\n     * {@link Highcharts.SVGElement} objects are added to the group by using the\n     * group as the first parameter in {@link Highcharts.SVGElement#add|add()}.\n     *\n     * @function Highcharts.SVGRenderer#g\n     *\n     * @param {string} [name]\n     *        The group will be given a class name of `highcharts-{name}`. This\n     *        can be used for styling and scripting.\n     *\n     * @return {Highcharts.SVGElement}\n     *         The generated wrapper element.\n     */\n    g(name) {\n        const elem = this.createElement('g');\n        return name ?\n            elem.attr({ 'class': 'highcharts-' + name }) :\n            elem;\n    }\n    /**\n     * Display an image.\n     *\n     * @sample highcharts/members/renderer-image-on-chart/\n     *         Add an image in a chart\n     * @sample highcharts/members/renderer-image/\n     *         Add an image independent of a chart\n     *\n     * @function Highcharts.SVGRenderer#image\n     *\n     * @param {string} href\n     *        The image source.\n     *\n     * @param {number} [x]\n     *        The X position.\n     *\n     * @param {number} [y]\n     *        The Y position.\n     *\n     * @param {number} [width]\n     *        The image width. If omitted, it defaults to the image file width.\n     *\n     * @param {number} [height]\n     *        The image height. If omitted it defaults to the image file\n     *        height.\n     *\n     * @param {Function} [onload]\n     *        Event handler for image load.\n     *\n     * @return {Highcharts.SVGElement}\n     *         The generated wrapper element.\n     */\n    image(href, x, y, width, height, onload) {\n        const attribs = { preserveAspectRatio: 'none' };\n        // Optional properties (#11756)\n        if (isNumber(x)) {\n            attribs.x = x;\n        }\n        if (isNumber(y)) {\n            attribs.y = y;\n        }\n        if (isNumber(width)) {\n            attribs.width = width;\n        }\n        if (isNumber(height)) {\n            attribs.height = height;\n        }\n        const elemWrapper = this.createElement('image').attr(attribs), onDummyLoad = function (e) {\n            elemWrapper.attr({ href });\n            onload.call(elemWrapper, e);\n        };\n        // Add load event if supplied\n        if (onload) {\n            // We have to use a dummy HTML image since IE support for SVG image\n            // load events is very buggy. First set a transparent src, wait for\n            // dummy to load, and then add the real src to the SVG image.\n            elemWrapper.attr({\n                /* eslint-disable-next-line max-len */\n                href: 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n            });\n            const dummy = new win.Image();\n            addEvent(dummy, 'load', onDummyLoad);\n            dummy.src = href;\n            if (dummy.complete) {\n                onDummyLoad({});\n            }\n        }\n        else {\n            elemWrapper.attr({ href });\n        }\n        return elemWrapper;\n    }\n    /**\n     * Draw a symbol out of pre-defined shape paths from\n     * {@link SVGRenderer#symbols}.\n     * It is used in Highcharts for point makers, which cake a `symbol` option,\n     * and label and button backgrounds like in the tooltip and stock flags.\n     *\n     * @function Highcharts.SVGRenderer#symbol\n     *\n     * @param {string} symbol\n     * The symbol name.\n     *\n     * @param {number} [x]\n     * The X coordinate for the top left position.\n     *\n     * @param {number} [y]\n     * The Y coordinate for the top left position.\n     *\n     * @param {number} [width]\n     * The pixel width.\n     *\n     * @param {number} [height]\n     * The pixel height.\n     *\n     * @param {Highcharts.SymbolOptionsObject} [options]\n     * Additional options, depending on the actual symbol drawn.\n     *\n     * @return {Highcharts.SVGElement}\n     * SVG symbol.\n     */\n    symbol(symbol, x, y, width, height, options) {\n        const ren = this, imageRegex = /^url\\((.*?)\\)$/, isImage = imageRegex.test(symbol), sym = (!isImage && (this.symbols[symbol] ? symbol : 'circle')), \n        // get the symbol definition function\n        symbolFn = (sym && this.symbols[sym]);\n        let obj, path, imageSrc, centerImage;\n        if (symbolFn) {\n            // Check if there's a path defined for this symbol\n            if (typeof x === 'number') {\n                path = symbolFn.call(this.symbols, Math.round(x || 0), Math.round(y || 0), width || 0, height || 0, options);\n            }\n            obj = this.path(path);\n            if (!ren.styledMode) {\n                obj.attr('fill', 'none');\n            }\n            // expando properties for use in animate and attr\n            extend(obj, {\n                symbolName: (sym || void 0),\n                x: x,\n                y: y,\n                width: width,\n                height: height\n            });\n            if (options) {\n                extend(obj, options);\n            }\n            // Image symbols\n        }\n        else if (isImage) {\n            imageSrc = symbol.match(imageRegex)[1];\n            // Create the image synchronously, add attribs async\n            const img = obj = this.image(imageSrc);\n            // The image width is not always the same as the symbol width. The\n            // image may be centered within the symbol, as is the case when\n            // image shapes are used as label backgrounds, for example in flags.\n            img.imgwidth = pick(options && options.width, symbolSizes[imageSrc] && symbolSizes[imageSrc].width);\n            img.imgheight = pick(options && options.height, symbolSizes[imageSrc] && symbolSizes[imageSrc].height);\n            /**\n             * Set the size and position\n             */\n            centerImage = (obj) => obj.attr({\n                width: obj.width,\n                height: obj.height\n            });\n            /**\n             * Width and height setters that take both the image's physical size\n             * and the label size into consideration, and translates the image\n             * to center within the label.\n             */\n            ['width', 'height'].forEach((key) => {\n                img[`${key}Setter`] = function (value, key) {\n                    this[key] = value;\n                    const { alignByTranslate, element, width, height, imgwidth, imgheight } = this, imgSize = key === 'width' ? imgwidth : imgheight;\n                    let scale = 1;\n                    // Scale and center the image within its container. The name\n                    // `backgroundSize` is taken from the CSS spec, but the\n                    // value `within` is made up. Other possible values in the\n                    // spec, `cover` and `contain`, can be implemented if\n                    // needed.\n                    if (options &&\n                        options.backgroundSize === 'within' &&\n                        width &&\n                        height &&\n                        imgwidth &&\n                        imgheight) {\n                        scale = Math.min(width / imgwidth, height / imgheight);\n                        // Update both width and height to keep the ratio\n                        // correct (#17315)\n                        attr(element, {\n                            width: Math.round(imgwidth * scale),\n                            height: Math.round(imgheight * scale)\n                        });\n                    }\n                    else if (element && imgSize) {\n                        element.setAttribute(key, imgSize);\n                    }\n                    if (!alignByTranslate && imgwidth && imgheight) {\n                        this.translate(((width || 0) - (imgwidth * scale)) / 2, ((height || 0) - (imgheight * scale)) / 2);\n                    }\n                };\n            });\n            if (defined(x)) {\n                img.attr({\n                    x: x,\n                    y: y\n                });\n            }\n            img.isImg = true;\n            if (defined(img.imgwidth) && defined(img.imgheight)) {\n                centerImage(img);\n            }\n            else {\n                // Initialize image to be 0 size so export will still function\n                // if there's no cached sizes.\n                img.attr({ width: 0, height: 0 });\n                // Create a dummy JavaScript image to get the width and height.\n                createElement('img', {\n                    onload: function () {\n                        const chart = charts[ren.chartIndex];\n                        // Special case for SVGs on IE11, the width is not\n                        // accessible until the image is part of the DOM\n                        // (#2854).\n                        if (this.width === 0) {\n                            css(this, {\n                                position: 'absolute',\n                                top: '-999em'\n                            });\n                            doc.body.appendChild(this);\n                        }\n                        // Center the image\n                        symbolSizes[imageSrc] = {\n                            width: this.width,\n                            height: this.height\n                        };\n                        img.imgwidth = this.width;\n                        img.imgheight = this.height;\n                        if (img.element) {\n                            centerImage(img);\n                        }\n                        // Clean up after #2854 workaround.\n                        if (this.parentNode) {\n                            this.parentNode.removeChild(this);\n                        }\n                        // Fire the load event when all external images are\n                        // loaded\n                        ren.imgCount--;\n                        if (!ren.imgCount && chart && !chart.hasLoaded) {\n                            chart.onload();\n                        }\n                    },\n                    src: imageSrc\n                });\n                this.imgCount++;\n            }\n        }\n        return obj;\n    }\n    /**\n     * Define a clipping rectangle. The clipping rectangle is later applied\n     * to {@link SVGElement} objects through the {@link SVGElement#clip}\n     * function.\n     *\n     * @example\n     * let circle = renderer.circle(100, 100, 100)\n     *     .attr({ fill: 'red' })\n     *     .add();\n     * let clipRect = renderer.clipRect(100, 100, 100, 100);\n     *\n     * // Leave only the lower right quarter visible\n     * circle.clip(clipRect);\n     *\n     * @function Highcharts.SVGRenderer#clipRect\n     *\n     * @param {number} [x]\n     *\n     * @param {number} [y]\n     *\n     * @param {number} [width]\n     *\n     * @param {number} [height]\n     *\n     * @return {Highcharts.ClipRectElement}\n     *         A clipping rectangle.\n     */\n    clipRect(x, y, width, height) {\n        const \n        // Add a hyphen at the end to avoid confusion in testing indexes\n        // -1 and -10, -11 etc (#6550)\n        id = uniqueKey() + '-', clipPath = this.createElement('clipPath').attr({\n            id: id\n        }).add(this.defs), wrapper = this.rect(x, y, width, height, 0).add(clipPath);\n        wrapper.id = id;\n        wrapper.clipPath = clipPath;\n        wrapper.count = 0;\n        return wrapper;\n    }\n    /**\n     * Draw text. The text can contain a subset of HTML, like spans and anchors\n     * and some basic text styling of these. For more advanced features like\n     * border and background, use {@link Highcharts.SVGRenderer#label} instead.\n     * To update the text after render, run `text.attr({ text: 'New text' })`.\n     *\n     * @sample highcharts/members/renderer-text-on-chart/\n     *         Annotate the chart freely\n     * @sample highcharts/members/renderer-on-chart/\n     *         Annotate with a border and in response to the data\n     * @sample highcharts/members/renderer-text/\n     *         Formatted text\n     *\n     * @function Highcharts.SVGRenderer#text\n     *\n     * @param {string} [str]\n     * The text of (subset) HTML to draw.\n     *\n     * @param {number} [x]\n     * The x position of the text's lower left corner.\n     *\n     * @param {number} [y]\n     * The y position of the text's lower left corner.\n     *\n     * @param {boolean} [useHTML=false]\n     * Use HTML to render the text.\n     *\n     * @return {Highcharts.SVGElement}\n     * The text object.\n     */\n    text(str, x, y, useHTML) {\n        const renderer = this, attribs = {};\n        if (useHTML && (renderer.allowHTML || !renderer.forExport)) {\n            return renderer.html(str, x, y);\n        }\n        attribs.x = Math.round(x || 0); // X always needed for line-wrap logic\n        if (y) {\n            attribs.y = Math.round(y);\n        }\n        if (defined(str)) {\n            attribs.text = str;\n        }\n        const wrapper = renderer.createElement('text').attr(attribs);\n        if (!useHTML || (renderer.forExport && !renderer.allowHTML)) {\n            wrapper.xSetter = function (value, key, element) {\n                const tspans = element.getElementsByTagName('tspan'), parentVal = element.getAttribute(key);\n                for (let i = 0, tspan; i < tspans.length; i++) {\n                    tspan = tspans[i];\n                    // If the x values are equal, the tspan represents a line\n                    // break\n                    if (tspan.getAttribute(key) === parentVal) {\n                        tspan.setAttribute(key, value);\n                    }\n                }\n                element.setAttribute(key, value);\n            };\n        }\n        return wrapper;\n    }\n    /**\n     * Utility to return the baseline offset and total line height from the font\n     * size.\n     *\n     * @function Highcharts.SVGRenderer#fontMetrics\n     *\n     * @param {Highcharts.SVGElement|Highcharts.SVGDOMElement|number} [element]\n     *        The element to inspect for a current font size. If a number is\n     *        given, it's used as a fall back for direct font size in pixels.\n     *\n     * @return {Highcharts.FontMetricsObject}\n     *         The font metrics.\n     */\n    fontMetrics(element) {\n        const f = pInt(SVGElement.prototype.getStyle.call(element, 'font-size') || 0);\n        // Empirical values found by comparing font size and bounding box\n        // height. Applies to the default font family.\n        // https://jsfiddle.net/highcharts/7xvn7/\n        const h = f < 24 ? f + 3 : Math.round(f * 1.2), b = Math.round(h * 0.8);\n        return {\n            // Line height\n            h,\n            // Baseline\n            b,\n            // Font size\n            f\n        };\n    }\n    /**\n     * Correct X and Y positioning of a label for rotation (#1764).\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#rotCorr\n     */\n    rotCorr(baseline, rotation, alterY) {\n        let y = baseline;\n        if (rotation && alterY) {\n            y = Math.max(y * Math.cos(rotation * deg2rad), 4);\n        }\n        return {\n            x: (-baseline / 3) * Math.sin(rotation * deg2rad),\n            y: y\n        };\n    }\n    /**\n     * Compatibility function to convert the legacy one-dimensional path array\n     * into an array of segments.\n     *\n     * It is used in maps to parse the `path` option, and in SVGRenderer.dSetter\n     * to support legacy paths from demos.\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#pathToSegments\n     */\n    pathToSegments(path) {\n        const ret = [];\n        const segment = [];\n        const commandLength = {\n            A: 8,\n            C: 7,\n            H: 2,\n            L: 3,\n            M: 3,\n            Q: 5,\n            S: 5,\n            T: 3,\n            V: 2\n        };\n        // Short, non-typesafe parsing of the one-dimensional array. It splits\n        // the path on any string. This is not type checked against the tuple\n        // types, but is shorter, and doesn't require specific checks for any\n        // command type in SVG.\n        for (let i = 0; i < path.length; i++) {\n            // Command skipped, repeat previous or insert L/l for M/m\n            if (isString(segment[0]) &&\n                isNumber(path[i]) &&\n                segment.length === commandLength[(segment[0].toUpperCase())]) {\n                path.splice(i, 0, segment[0].replace('M', 'L').replace('m', 'l'));\n            }\n            // Split on string\n            if (typeof path[i] === 'string') {\n                if (segment.length) {\n                    ret.push(segment.slice(0));\n                }\n                segment.length = 0;\n            }\n            segment.push(path[i]);\n        }\n        ret.push(segment.slice(0));\n        return ret;\n        /*\n        // Fully type-safe version where each tuple type is checked. The\n        // downside is filesize and a lack of flexibility for unsupported\n        // commands\n        const ret: SVGPath = [],\n            commands = {\n                A: 7,\n                C: 6,\n                H: 1,\n                L: 2,\n                M: 2,\n                Q: 4,\n                S: 4,\n                T: 2,\n                V: 1,\n                Z: 0\n            };\n\n        let i = 0,\n            lastI = 0,\n            lastCommand;\n\n        while (i < path.length) {\n            const item = path[i];\n\n            let command;\n\n            if (typeof item === 'string') {\n                command = item;\n                i += 1;\n            } else {\n                command = lastCommand || 'M';\n            }\n\n            // Upper case\n            const commandUC = command.toUpperCase();\n\n            if (commandUC in commands) {\n\n                // No numeric parameters\n                if (command === 'Z' || command === 'z') {\n                    ret.push([command]);\n\n                // One numeric parameter\n                } else {\n                    const val0 = path[i];\n                    if (typeof val0 === 'number') {\n\n                        // Horizontal line to\n                        if (command === 'H' || command === 'h') {\n                            ret.push([command, val0]);\n                            i += 1;\n\n                        // Vertical line to\n                        } else if (command === 'V' || command === 'v') {\n                            ret.push([command, val0]);\n                            i += 1;\n\n                        // Two numeric parameters\n                        } else {\n                            const val1 = path[i + 1];\n                            if (typeof val1 === 'number') {\n                                // lineTo\n                                if (command === 'L' || command === 'l') {\n                                    ret.push([command, val0, val1]);\n                                    i += 2;\n\n                                // moveTo\n                                } else if (command === 'M' || command === 'm') {\n                                    ret.push([command, val0, val1]);\n                                    i += 2;\n\n                                // Smooth quadratic bezier\n                                } else if (command === 'T' || command === 't') {\n                                    ret.push([command, val0, val1]);\n                                    i += 2;\n\n                                // Four numeric parameters\n                                } else {\n                                    const val2 = path[i + 2],\n                                        val3 = path[i + 3];\n                                    if (\n                                        typeof val2 === 'number' &&\n                                        typeof val3 === 'number'\n                                    ) {\n                                        // Quadratic bezier to\n                                        if (\n                                            command === 'Q' ||\n                                            command === 'q'\n                                        ) {\n                                            ret.push([\n                                                command,\n                                                val0,\n                                                val1,\n                                                val2,\n                                                val3\n                                            ]);\n                                            i += 4;\n\n                                        // Smooth cubic bezier to\n                                        } else if (\n                                            command === 'S' ||\n                                            command === 's'\n                                        ) {\n                                            ret.push([\n                                                command,\n                                                val0,\n                                                val1,\n                                                val2,\n                                                val3\n                                            ]);\n                                            i += 4;\n\n                                        // Six numeric parameters\n                                        } else {\n                                            const val4 = path[i + 4],\n                                                val5 = path[i + 5];\n\n                                            if (\n                                                typeof val4 === 'number' &&\n                                                typeof val5 === 'number'\n                                            ) {\n                                                // Curve to\n                                                if (\n                                                    command === 'C' ||\n                                                    command === 'c'\n                                                ) {\n                                                    ret.push([\n                                                        command,\n                                                        val0,\n                                                        val1,\n                                                        val2,\n                                                        val3,\n                                                        val4,\n                                                        val5\n                                                    ]);\n                                                    i += 6;\n\n                                                // Seven numeric parameters\n                                                } else {\n                                                    const val6 = path[i + 6];\n\n                                                    // Arc to\n                                                    if (\n                                                        typeof val6 ===\n                                                        'number' &&\n                                                        (\n                                                            command === 'A' ||\n                                                            command === 'a'\n                                                        )\n                                                    ) {\n                                                        ret.push([\n                                                            command,\n                                                            val0,\n                                                            val1,\n                                                            val2,\n                                                            val3,\n                                                            val4,\n                                                            val5,\n                                                            val6\n                                                        ]);\n                                                        i += 7;\n\n                                                    }\n\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n\n                        }\n                    }\n                }\n            }\n\n            // An unmarked command following a moveTo is a lineTo\n            lastCommand = command === 'M' ? 'L' : command;\n\n            if (i === lastI) {\n                break;\n            }\n            lastI = i;\n        }\n        return ret;\n        */\n    }\n    /**\n     * Draw a label, which is an extended text element with support for border\n     * and background. Highcharts creates a `g` element with a text and a `path`\n     * or `rect` inside, to make it behave somewhat like a HTML div. Border and\n     * background are set through `stroke`, `stroke-width` and `fill` attributes\n     * using the {@link Highcharts.SVGElement#attr|attr} method. To update the\n     * text after render, run `label.attr({ text: 'New text' })`.\n     *\n     * @sample highcharts/members/renderer-label-on-chart/\n     *         A label on the chart\n     *\n     * @function Highcharts.SVGRenderer#label\n     *\n     * @param {string} str\n     *        The initial text string or (subset) HTML to render.\n     *\n     * @param {number} x\n     *        The x position of the label's left side.\n     *\n     * @param {number} [y]\n     *        The y position of the label's top side or baseline, depending on\n     *        the `baseline` parameter.\n     *\n     * @param {string} [shape='rect']\n     *        The shape of the label's border/background, if any. Defaults to\n     *        `rect`. Other possible values are `callout` or other shapes\n     *        defined in {@link Highcharts.SVGRenderer#symbols}.\n     *\n     * @param {number} [anchorX]\n     *        In case the `shape` has a pointer, like a flag, this is the\n     *        coordinates it should be pinned to.\n     *\n     * @param {number} [anchorY]\n     *        In case the `shape` has a pointer, like a flag, this is the\n     *        coordinates it should be pinned to.\n     *\n     * @param {boolean} [useHTML=false]\n     *        Whether to use HTML to render the label.\n     *\n     * @param {boolean} [baseline=false]\n     *        Whether to position the label relative to the text baseline,\n     *        like {@link Highcharts.SVGRenderer#text|renderer.text}, or to the\n     *        upper border of the rectangle.\n     *\n     * @param {string} [className]\n     *        Class name for the group.\n     *\n     * @return {Highcharts.SVGElement}\n     *         The generated label.\n     */\n    label(str, x, y, shape, anchorX, anchorY, useHTML, baseline, className) {\n        return new SVGLabel(this, str, x, y, shape, anchorX, anchorY, useHTML, baseline, className);\n    }\n    /**\n     * Re-align all aligned elements.\n     *\n     * @private\n     * @function Highcharts.SVGRenderer#alignElements\n     */\n    alignElements() {\n        this.alignedObjects.forEach((el) => el.align());\n    }\n}\nextend(SVGRenderer.prototype, {\n    /**\n     * A pointer to the renderer's associated Element class.\n     *\n     * @name Highcharts.SVGRenderer#Element\n     * @type {Highcharts.SVGElement}\n     */\n    Element: SVGElement,\n    SVG_NS,\n    /**\n     * A collection of characters mapped to HTML entities. When `useHTML` on an\n     * element is true, these entities will be rendered correctly by HTML. In\n     * the SVG pseudo-HTML, they need to be unescaped back to simple characters,\n     * so for example `&lt;` will render as `<`.\n     *\n     * @example\n     * // Add support for unescaping quotes\n     * Highcharts.SVGRenderer.prototype.escapes['\"'] = '&quot;';\n     *\n     * @name Highcharts.SVGRenderer#escapes\n     * @type {Highcharts.Dictionary<string>}\n     */\n    escapes: {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        \"'\": '&#39;',\n        '\"': '&quot;'\n    },\n    /**\n     * An extendable collection of functions for defining symbol paths.\n     *\n     * @name Highcharts.SVGRenderer#symbols\n     * @type {Highcharts.SymbolDictionary}\n     */\n    symbols: Symbols,\n    /**\n     * Dummy function for plugins, called every time the renderer is updated.\n     * Prior to Highcharts 5, this was used for the canvg renderer.\n     *\n     * @deprecated\n     * @function Highcharts.SVGRenderer#draw\n     */\n    draw: noop\n});\n/* *\n *\n *  Registry\n *\n * */\nRendererRegistry.registerRendererType('svg', SVGRenderer, true);\n/* *\n *\n *  Export Default\n *\n * */\nexport default SVGRenderer;\n/* *\n *\n *  API Declarations\n *\n * */\n/**\n * A clipping rectangle that can be applied to one or more {@link SVGElement}\n * instances. It is instanciated with the {@link SVGRenderer#clipRect} function\n * and applied with the {@link SVGElement#clip} function.\n *\n * @example\n * let circle = renderer.circle(100, 100, 100)\n *     .attr({ fill: 'red' })\n *     .add();\n * let clipRect = renderer.clipRect(100, 100, 100, 100);\n *\n * // Leave only the lower right quarter visible\n * circle.clip(clipRect);\n *\n * @typedef {Highcharts.SVGElement} Highcharts.ClipRectElement\n */\n/**\n * The font metrics.\n *\n * @interface Highcharts.FontMetricsObject\n */ /**\n* The baseline relative to the top of the box.\n*\n* @name Highcharts.FontMetricsObject#b\n* @type {number}\n*/ /**\n* The font size.\n*\n* @name Highcharts.FontMetricsObject#f\n* @type {number}\n*/ /**\n* The line height.\n*\n* @name Highcharts.FontMetricsObject#h\n* @type {number}\n*/\n/**\n * An object containing `x` and `y` properties for the position of an element.\n *\n * @interface Highcharts.PositionObject\n */ /**\n* X position of the element.\n* @name Highcharts.PositionObject#x\n* @type {number}\n*/ /**\n* Y position of the element.\n* @name Highcharts.PositionObject#y\n* @type {number}\n*/\n/**\n * A rectangle.\n *\n * @interface Highcharts.RectangleObject\n */ /**\n* Height of the rectangle.\n* @name Highcharts.RectangleObject#height\n* @type {number}\n*/ /**\n* Width of the rectangle.\n* @name Highcharts.RectangleObject#width\n* @type {number}\n*/ /**\n* Horizontal position of the rectangle.\n* @name Highcharts.RectangleObject#x\n* @type {number}\n*/ /**\n* Vertical position of the rectangle.\n* @name Highcharts.RectangleObject#y\n* @type {number}\n*/\n/**\n * The shadow options.\n *\n * @interface Highcharts.ShadowOptionsObject\n */ /**\n* The shadow color.\n* @name    Highcharts.ShadowOptionsObject#color\n* @type    {Highcharts.ColorString|undefined}\n* @default #000000\n*/ /**\n* The horizontal offset from the element.\n*\n* @name    Highcharts.ShadowOptionsObject#offsetX\n* @type    {number|undefined}\n* @default 1\n*/ /**\n* The vertical offset from the element.\n* @name    Highcharts.ShadowOptionsObject#offsetY\n* @type    {number|undefined}\n* @default 1\n*/ /**\n* The shadow opacity.\n*\n* @name    Highcharts.ShadowOptionsObject#opacity\n* @type    {number|undefined}\n* @default 0.15\n*/ /**\n* The shadow width or distance from the element.\n* @name    Highcharts.ShadowOptionsObject#width\n* @type    {number|undefined}\n* @default 3\n*/\n/**\n * @interface Highcharts.SizeObject\n */ /**\n* @name Highcharts.SizeObject#height\n* @type {number}\n*/ /**\n* @name Highcharts.SizeObject#width\n* @type {number}\n*/\n/**\n * Array of path commands, that will go into the `d` attribute of an SVG\n * element.\n *\n * @typedef {Array<(Array<Highcharts.SVGPathCommand>|Array<Highcharts.SVGPathCommand,number>|Array<Highcharts.SVGPathCommand,number,number>|Array<Highcharts.SVGPathCommand,number,number,number,number>|Array<Highcharts.SVGPathCommand,number,number,number,number,number,number>|Array<Highcharts.SVGPathCommand,number,number,number,number,number,number,number>)>} Highcharts.SVGPathArray\n */\n/**\n * Possible path commands in an SVG path array. Valid values are `A`, `C`, `H`,\n * `L`, `M`, `Q`, `S`, `T`, `V`, `Z`.\n *\n * @typedef {string} Highcharts.SVGPathCommand\n * @validvalue [\"a\",\"c\",\"h\",\"l\",\"m\",\"q\",\"s\",\"t\",\"v\",\"z\",\"A\",\"C\",\"H\",\"L\",\"M\",\"Q\",\"S\",\"T\",\"V\",\"Z\"]\n */\n/**\n * An extendable collection of functions for defining symbol paths. Symbols are\n * used internally for point markers, button and label borders and backgrounds,\n * or custom shapes. Extendable by adding to {@link SVGRenderer#symbols}.\n *\n * @interface Highcharts.SymbolDictionary\n */ /**\n* @name Highcharts.SymbolDictionary#[key:string]\n* @type {Function|undefined}\n*/ /**\n* @name Highcharts.SymbolDictionary#arc\n* @type {Function|undefined}\n*/ /**\n* @name Highcharts.SymbolDictionary#callout\n* @type {Function|undefined}\n*/ /**\n* @name Highcharts.SymbolDictionary#circle\n* @type {Function|undefined}\n*/ /**\n* @name Highcharts.SymbolDictionary#diamond\n* @type {Function|undefined}\n*/ /**\n* @name Highcharts.SymbolDictionary#square\n* @type {Function|undefined}\n*/ /**\n* @name Highcharts.SymbolDictionary#triangle\n* @type {Function|undefined}\n*/\n/**\n * Can be one of `arc`, `callout`, `circle`, `diamond`, `square`, `triangle`,\n * and `triangle-down`. Symbols are used internally for point markers, button\n * and label borders and backgrounds, or custom shapes. Extendable by adding to\n * {@link SVGRenderer#symbols}.\n *\n * @typedef {\"arc\"|\"callout\"|\"circle\"|\"diamond\"|\"square\"|\"triangle\"|\"triangle-down\"} Highcharts.SymbolKeyValue\n */\n/**\n * Additional options, depending on the actual symbol drawn.\n *\n * @interface Highcharts.SymbolOptionsObject\n */ /**\n* The anchor X position for the `callout` symbol. This is where the chevron\n* points to.\n*\n* @name Highcharts.SymbolOptionsObject#anchorX\n* @type {number|undefined}\n*/ /**\n* The anchor Y position for the `callout` symbol. This is where the chevron\n* points to.\n*\n* @name Highcharts.SymbolOptionsObject#anchorY\n* @type {number|undefined}\n*/ /**\n* The end angle of an `arc` symbol.\n*\n* @name Highcharts.SymbolOptionsObject#end\n* @type {number|undefined}\n*/ /**\n* Whether to draw `arc` symbol open or closed.\n*\n* @name Highcharts.SymbolOptionsObject#open\n* @type {boolean|undefined}\n*/ /**\n* The radius of an `arc` symbol, or the border radius for the `callout` symbol.\n*\n* @name Highcharts.SymbolOptionsObject#r\n* @type {number|undefined}\n*/ /**\n* The start angle of an `arc` symbol.\n*\n* @name Highcharts.SymbolOptionsObject#start\n* @type {number|undefined}\n*/\n(''); // keeps doclets above in transpiled file\n"],"mappings":"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MAAM,GAAG,CAAC;MACtB;MACA4L,OAAO,CAACY,IAAI,CAAClG,IAAI,CAACuE,CAAC,CAAC,CAAC;IACzB;IACAc,GAAG,CAACa,IAAI,CAACZ,OAAO,CAACa,KAAK,CAAC,CAAC,CAAC,CAAC;IAC1B,OAAOd,GAAG;IACV;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAyBI;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACInH,KAAKA,CAACgG,GAAG,EAAEzG,CAAC,EAAEC,CAAC,EAAEM,KAAK,EAAEoI,OAAO,EAAEC,OAAO,EAAEpI,OAAO,EAAE8G,QAAQ,EAAEuB,SAAS,EAAE;IACpE,OAAO,IAAI/Q,QAAQ,CAAC,IAAI,EAAE2O,GAAG,EAAEzG,CAAC,EAAEC,CAAC,EAAEM,KAAK,EAAEoI,OAAO,EAAEC,OAAO,EAAEpI,OAAO,EAAE8G,QAAQ,EAAEuB,SAAS,CAAC;EAC/F;EACA;AACJ;AACA;AACA;AACA;AACA;EACI9E,aAAaA,CAAA,EAAG;IACZ,IAAI,CAACpK,cAAc,CAACiM,OAAO,CAAEkD,EAAE,IAAKA,EAAE,CAACC,KAAK,CAAC,CAAC,CAAC;EACnD;AACJ;AACAvQ,MAAM,CAACU,WAAW,CAACgO,SAAS,EAAE;EAC1B;AACJ;AACA;AACA;AACA;AACA;EACIvJ,OAAO,EAAE9F,UAAU;EACnBJ,MAAM;EACN;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIuR,OAAO,EAAE;IACL,GAAG,EAAE,OAAO;IACZ,GAAG,EAAE,MAAM;IACX,GAAG,EAAE,MAAM;IACX,GAAG,EAAE,OAAO;IACZ,GAAG,EAAE;EACT,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI/D,OAAO,EAAElN,OAAO;EAChB;AACJ;AACA;AACA;AACA;AACA;AACA;EACIkR,IAAI,EAAEzR;AACV,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACAI,gBAAgB,CAACsR,oBAAoB,CAAC,KAAK,EAAEhQ,WAAW,EAAE,IAAI,CAAC;AAC/D;AACA;AACA;AACA;AACA;AACA,eAAeA,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAJA,CAII;AACJ;AACA;AACA;AACA;AACA,MALI,CAKD;AACH;AACA;AACA;AACA;AACA,SALG,CAKA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAJA,CAII;AACJ;AACA;AACA;AACA,MAJI,CAID;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAJA,CAII;AACJ;AACA;AACA;AACA,MAJI,CAID;AACH;AACA;AACA;AACA,SAJG,CAIA;AACH;AACA;AACA;AACA,YAJG,CAIA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAJA,CAII;AACJ;AACA;AACA;AACA;AACA,MALI,CAKD;AACH;AACA;AACA;AACA;AACA;AACA,SANG,CAMA;AACH;AACA;AACA;AACA;AACA,YALG,CAKA;AACH;AACA;AACA;AACA;AACA;AACA,eANG,CAMA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAFA,CAEI;AACJ;AACA;AACA,MAHI,CAGD;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GANA,CAMI;AACJ;AACA;AACA,MAHI,CAGD;AACH;AACA;AACA,SAHG,CAGA;AACH;AACA;AACA,YAHG,CAGA;AACH;AACA;AACA,eAHG,CAGA;AACH;AACA;AACA,kBAHG,CAGA;AACH;AACA;AACA,qBAHG,CAGA;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAJA,CAII;AACJ;AACA;AACA;AACA;AACA;AACA,MANI,CAMD;AACH;AACA;AACA;AACA;AACA;AACA,SANG,CAMA;AACH;AACA;AACA;AACA;AACA,YALG,CAKA;AACH;AACA;AACA;AACA;AACA,eALG,CAKA;AACH;AACA;AACA;AACA;AACA,kBALG,CAKA;AACH;AACA;AACA;AACA;AACA;AACC,EAAE,CAAE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}